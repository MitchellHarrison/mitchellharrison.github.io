<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Mitch&#39;s Website</title>
<link>https://mitchellharrison.github.io/tutorials.html</link>
<atom:link href="https://mitchellharrison.github.io/tutorials.xml" rel="self" type="application/rss+xml"/>
<description></description>
<generator>quarto-1.3.333</generator>
<lastBuildDate>Sun, 26 May 2024 19:51:32 GMT</lastBuildDate>
<item>
  <title>Hello, statistics. | Mathematical Statistics 0</title>
  <dc:creator>Mitch Harrison</dc:creator>
  <link>https://mitchellharrison.github.io/tutorials/math_stat_0.html</link>
  <description><![CDATA[ 



<section id="background" class="level1">
<h1>Background</h1>
<p>I recently finished <a href="https://stat.duke.edu/courses/theory-and-methods-statistical-learning-and-inference-0">STA 432</a> at Duke. For my fellow Duke students looking to take it: yes, it was that hard. But you’re smarter than me, so you will be fine! For the mathematically curious, the course is (somewhat longwindedly) called “Theory and Methods of Statistical Learning and Inference.” If, like me, you prefer helpful course names, call it “Mathematical Statistics.”</p>
<p>While in STA 432, I kept finding myself in mathematics far beyond the “Google the topic and find it on 100 websites” stage. In fact, the topics covered in the course were typically covered by sources that assumed a level of mathematical maturity that I did not possess. I kept thinking that I needed to pre-understand the material to understand the explanation of that same material. I longed for a plain-language introduction to mathematically rigorous subjects.</p>
<p>This series is my humble attempt to communicate the beauty of mathematical statistics in comprehensible English to my fellow students (at Duke or at home). To facilitate this, we will take a “trust my word for it” approach, with proofs being in separate articles. However, I recommend at least reading through any proofs that I post. Struggling through those should prepare you for problems involving those same concepts. Even in the proofs articles, I’ll go step-by-step (very granularly) for easy comprehension. That is not a luxury that professors get in a short lecture period, but I’ll take my time to make sure every step is annotated, which I wish I had when I was in 432.</p>
</section>
<section id="course-outline" class="level1">
<h1>Course Outline</h1>
<p>This course is broadly broken into three sections. First, we will study point <a href="https://en.wikipedia.org/wiki/Estimator">estimators</a>. If you’ve never heard of estimators, don’t worry. They’re just educated guesses at unknown distribution parameters (like the mean of a normal distribution). We will calculate estimators, study them, and choose between them.</p>
<p>In the middle portion of the course, we will look at <a href="https://en.wikipedia.org/wiki/Confidence_interval">confidence intervals</a>. Again, no background knowledge is necessary here. In effect, confidence intervals tell us how confident we are that our chosen estimator falls into a particular range. Any statisticians reading just cringed at my description because it isn’t technically accurate, but we will discuss why that’s the case when we get to confidence intervals. Don’t worry; it’ll be pretty intuitive once we get there.</p>
<p>Last but certainly not least, we will conduct <a href="https://en.wikipedia.org/wiki/Statistical_hypothesis_test">hypothesis tests</a>. There, we will choose two possible options for our estimator. For example, maybe we want to choose between X &gt; 5 or X &lt;= 5. We will use our data to decide which option is more likely to be correct. Of course, we will never be 100% of our guess, but we will get close.</p>
<p>And that’s the course! It sounds nice and clean, and in many ways it is. However, like with much of statistics, the findings are the easy part. Finding the findings is the challenge. But I’ll try my best to get us through it so your GPA can be better than mine.</p>
</section>
<section id="course-materials" class="level1">
<h1>Course Materials</h1>
<p>My course, which was run by Professor <a href="https://scholars.duke.edu/person/alexander.volfovsky">Alexander Volfovsky</a>, had very few requirements. There was a recommended textbook (found <a href="https://www.amazon.com/Probability-Statistics-4th-Morris-DeGroot/dp/0321500466">here</a>), which I found helpful to get a second perspective on topics. But if the price is off-putting, don’t worry. We only loosely followed it; apart from some homework questions, it was never explicitly required. So, for our purposes, I won’t reference the book directly. If you want a second perspective and don’t mind spending some coin, you have the Amazon link and can search the ISBN elsewhere.</p>
<p>Besides that, you’ll only need a willingness to learn and a statistical curiosity!</p>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>To get started with the course, click <a href="../tutorials/math_stat_0.html">here</a> to go to the first article in the series, where we begin our discussion of estimators! Of course, if you want to ask me anything about this course, my time at Duke, or anything else, the best place to reach me is on <a href="https://discord.gg/vF6W2bdKFH">Discord</a>! And if you really want to support this project, you can <a href="https://buymeacoffee.com/mitchellharrison">buy me a coffee</a>. Thank you for reading, and I can’t want to get started!</p>


</section>

 ]]></description>
  <category>Statistics</category>
  <guid>https://mitchellharrison.github.io/tutorials/math_stat_0.html</guid>
  <pubDate>Sun, 26 May 2024 19:51:32 GMT</pubDate>
  <media:content url="https://mitchellharrison.github.io/images/thumbnails/mathematical_statistics/0.png" medium="image" type="image/png" height="108" width="144"/>
</item>
<item>
  <title>Welcome to Estimators! | Mathematical Statistics 1</title>
  <dc:creator>Mitch Harrison</dc:creator>
  <link>https://mitchellharrison.github.io/tutorials/math_stat_1.html</link>
  <description><![CDATA[ 



<section id="introduction-to-point-estimation" class="level1">
<h1>Introduction to Point Estimation</h1>
<p>Say we have some data <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D">. It’s a vector, so just think of it like a list of <img src="https://latex.codecogs.com/png.latex?n"> numbers. We want to learn something about how these data came to be. First, we will aggregate our data using a <strong>statistic</strong>.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Definition
</div>
</div>
<div class="callout-body-container callout-body">
<p>Let <img src="https://latex.codecogs.com/png.latex?X_1,%20%5Ccdots,%20X_n"> be our data. A <strong>statistic</strong> is a function of that data. We will denote that statistic with <img src="https://latex.codecogs.com/png.latex?%5Cdelta">. Crucially, this function cannot contain anything that we don’t know. It is purely a function of known quantities.</p>
</div>
</div>
<section id="statistics" class="level2">
<h2 class="anchored" data-anchor-id="statistics">Statistics</h2>
<p>Let’s say that our data comes from a normal distribution (a “bell curve”). We denote this with <img src="https://latex.codecogs.com/png.latex?X%20%5Csim%20N(%5Cmu,%20%5Csigma%5E2)">, where <img src="https://latex.codecogs.com/png.latex?%5Cmu"> is the mean of the distribution and <img src="https://latex.codecogs.com/png.latex?%5Csigma%5E2"> is the variance. Also, to make our life easier, say we know the variance <img src="https://latex.codecogs.com/png.latex?%5Csigma%5E2">. In practice, this will basically never be the case, but it will simplify our math for now.</p>
<p>We have infinitely many options for statistics that we can choose. For example, we could use <img src="https://latex.codecogs.com/png.latex?X_1"> (that is, the first data point in our vector). While we leave some data on the table in that case, it is certainly a statistic since <img src="https://latex.codecogs.com/png.latex?%5Cdelta%20=%20X_1"> is a function of our data, and there are no unknowns.</p>
<p>Alternatively, we could use the observed mean of our data. We will call it <img src="https://latex.codecogs.com/png.latex?%5Coverline%7BX%7D"> (pronounced “<img src="https://latex.codecogs.com/png.latex?X"> bar”), and it is denoted with <img src="https://latex.codecogs.com/png.latex?%0A%5Cdelta(%5Cmathbf%7BX%7D)%20=%20%5Coverline%7BX%7D%20=%20%5Cfrac%7B1%7D%7Bn%7D%5Csum_%7Bi=1%7D%5En%20X_i.%0A"></p>
<p>Notice that this is also a statistic! Although it looks much more complicated, we are still using our data and no unknowns. Here, <img src="https://latex.codecogs.com/png.latex?n"> is the number of data points that we have, which we know. And we know every <img src="https://latex.codecogs.com/png.latex?X_i"> because each is part of our data vector <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D">.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Constants (e.g., 7) are also statistics, although no data are involved in the calculation. If it feels like you’re just guessing at random if you do this, you’re right.</p>
</div>
</div>
<p>Now let’s look at an example of a function that is <em>not</em> a statistic: <img src="https://latex.codecogs.com/png.latex?%0A%5Cdelta(%5Cmathbf%7BX%7D)%20=%20T%20=%20%5Cfrac%7B%5Coverline%7BX%7D%20-%20%5Cmu%7D%7B%5Csigma/%5Csqrt%7Bn%7D%7D.%0A"> This function will come back in future articles, but for now, recall that we said that we already know the variance <img src="https://latex.codecogs.com/png.latex?%5Csigma%5E2">. So that means we already know <img src="https://latex.codecogs.com/png.latex?%5Csigma">. We also know <img src="https://latex.codecogs.com/png.latex?n">, as we mentioned earlier. But <img src="https://latex.codecogs.com/png.latex?%5Cmu"> is unknown to us. Because we have an unknown value <img src="https://latex.codecogs.com/png.latex?%5Cmu"> in the numerator, <img src="https://latex.codecogs.com/png.latex?T"> is <em>not</em> a statistic.</p>
<hr>
</section>
</section>
<section id="point-estimators" class="level1">
<h1>Point Estimators</h1>
<p>To use a plain-language term that is largely despised among statisticians, we want to “guess” (*<em>gasp</em>*) at the value of our unknown parameter. In the previous example, that parameter was <img src="https://latex.codecogs.com/png.latex?%5Cmu">. To be more general, we will use the Greek letter <img src="https://latex.codecogs.com/png.latex?%5Ctheta"> (pronounced “theta”) since <img src="https://latex.codecogs.com/png.latex?%5Cmu"> is often saved for the mean of a normal distribution.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Definition
</div>
</div>
<div class="callout-body-container callout-body">
<p>Say we have data <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D"> that comes from some probability distribution with an unknown parameter <img src="https://latex.codecogs.com/png.latex?%5Ctheta"> that has some <em>true</em> fixed value. A <strong>point estimator</strong> is a statistic that estimates the true value of <img src="https://latex.codecogs.com/png.latex?%5Ctheta">, and is denoted by <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Ctheta%7D">. That is, <img src="https://latex.codecogs.com/png.latex?%0A%5Chat%7B%5Ctheta%7D%20=%20%5Cdelta(%5Cmathbf%7BX%7D).%0A"></p>
</div>
</div>
<section id="point-estimator-example" class="level2">
<h2 class="anchored" data-anchor-id="point-estimator-example">Point estimator example</h2>
<p>Let’s keep going with our data, which comes from a normal distribution. But, to get used to using <img src="https://latex.codecogs.com/png.latex?%5Ctheta">, say that <img src="https://latex.codecogs.com/png.latex?X%20%5Csim%20N(%5Ctheta,%20%5Csigma%5E2)">. One possible estimator is the example mean <img src="https://latex.codecogs.com/png.latex?%5Coverline%7BX%7D"> from earlier (i.e., the mean of the observed data). Alternatively, we can use a constant: say 5. Intuitively, it feels like <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Ctheta%7D%20=%20%5Coverline%7BX%7D"> would be a better guess than a simple <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Ctheta%7D%20=%205">, because it is actually informed by the data. But how do we quantify that intuition? We will calculate and compare both <em>bias</em> and <em>precision</em> for each.</p>
<section id="bias" class="level3">
<h3 class="anchored" data-anchor-id="bias">Bias</h3>
<p><strong>Bias</strong> tells us how often, on average, we get the correct value of our unknown parameter <img src="https://latex.codecogs.com/png.latex?%5Ctheta">. Mathematically, we hope that the following quantity is as small as possible: <img src="https://latex.codecogs.com/png.latex?%0A%5Cmathbb%7BE%7D%5B%5Cdelta(%5Cmathbf%7BX%7D)%20%7C%20%5Ctheta%5D%20-%20%5Ctheta.%0A"></p>
<p>The confusing-looking term <img src="https://latex.codecogs.com/png.latex?%5Cmathbb%7BE%7D%5B%5Ccdot%5D"> is the expected value of our estimator, given the value of the unknown parameter <img src="https://latex.codecogs.com/png.latex?%5Ctheta">. Basically, this is the expected value of <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Ctheta%7D">. If our estimator <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Ctheta%7D"> is expected to be exactly correct on average, then this whole term will be 0, which is the smallest possible bias.</p>
</section>
<section id="variance" class="level3">
<h3 class="anchored" data-anchor-id="variance">Variance</h3>
<p><strong>Variance</strong> describes the variability of our estimator. Ideally, variance is also small. Intuitively we are less “sure” about our estimate if we have a wider variance. We denote variance with <img src="https://latex.codecogs.com/png.latex?Var(%5Cdelta(%5Cmathbf%7BX%7D)%7C%5Ctheta)">.</p>
<p>However, notice that both bias and variance are conditional on the true value of our unknown parameter <img src="https://latex.codecogs.com/png.latex?%5Ctheta">. Thus, we cannot calculate these quantities directly. To deal with this, we will introduce the concept of <strong>loss</strong> in the next article!</p>


</section>
</section>
</section>

 ]]></description>
  <category>Statistics</category>
  <guid>https://mitchellharrison.github.io/tutorials/math_stat_1.html</guid>
  <pubDate>Sun, 26 May 2024 19:51:32 GMT</pubDate>
  <media:content url="https://mitchellharrison.github.io/images/thumbnails/mathematical_statistics/1.png" medium="image" type="image/png" height="108" width="144"/>
</item>
<item>
  <title>Our World in Emissions | TidyTutorial</title>
  <dc:creator>Mitch Harrison</dc:creator>
  <link>https://mitchellharrison.github.io/tutorials/tidytuesday_05212024.html</link>
  <description><![CDATA[ 



<p>Welcome! If you saw my post for this week’s TidyTuesday, I’m glad you liked it enough to learn from it! If not, you can either scroll to the bottom to see the final product or click <a href="../projects/tidytuesday_05212024/emissions.html">here</a> to see it. For this plot, we will use an area plot to visualize the global emissions by type going back to 1900. To start, we will use a bare-bones <code>ggplot2</code> area chart with no bells or whistles to see what we are working with.</p>
<div class="cell">
<details>
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-2"></span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># read data and rename an ugly column ------------------------------------------</span></span>
<span id="cb1-4">emis<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(</span>
<span id="cb1-5">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/"</span>,</span>
<span id="cb1-6">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/2024/2024-05-21/emissions.csv"</span></span>
<span id="cb1-7">  )</span>
<span id="cb1-8">)</span>
<span id="cb1-9"></span>
<span id="cb1-10">emis <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> emis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rename</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emissions =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"total_emissions_MtCO2e"</span>)</span>
<span id="cb1-12"></span>
<span id="cb1-13">emis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, commodity) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emissions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(emissions), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-16">  </span>
<span id="cb1-17">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># start of plot --------------------------------------------------------------</span></span>
<span id="cb1-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> emissions, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> commodity)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_area</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_05212024_files/figure-html/step-one-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Okay, we’ve learned a lot. First, there are a <em>lot</em> of categories. A good rule of thumb is that once you get to about seven colors, even non-colorblind humans struggle to differentiate. But there is hope! Notice that there are several types of coal production. Let’s aggregate them. Second, there is a long tail on the left because of near-zero data. Let’s bring our limit to the right to get a better look.</p>
<div class="cell">
<details>
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">emis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># get rid of that tail</span></span>
<span id="cb2-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb2-4">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># aggregate coal</span></span>
<span id="cb2-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(commodity, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, commodity),</span>
<span id="cb2-6">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, commodity) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emissions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(emissions), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-9">  </span>
<span id="cb2-10">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># start of plot --------------------------------------------------------------</span></span>
<span id="cb2-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> emissions, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> commodity)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_area</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_05212024_files/figure-html/step-two-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Much better! But to me, having the smallest category (cement) on top feels awkward. Let’s reorder the categories! I’ll do so in descending order of emissions in the last year.</p>
<div class="cell">
<details>
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">LEVS <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oil &amp; NGL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Natural Gas"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cement"</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># our desired order</span></span>
<span id="cb3-2"></span>
<span id="cb3-3">emis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb3-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(commodity, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, commodity),</span>
<span id="cb3-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(commodity, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> LEVS) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># re-order </span></span>
<span id="cb3-8">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, commodity) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emissions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(emissions), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-11">  </span>
<span id="cb3-12">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># start of plot --------------------------------------------------------------</span></span>
<span id="cb3-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> emissions, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> commodity)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_area</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_05212024_files/figure-html/step-three-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now we’re cooking! It’s time for some style points. I’ll use my favorite aesthetic cheat code: <a href="https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/"><code>ggthemes</code></a>. Let’s add a theme and color scheme. I’m going with the FiveThirtyEight theme and a colorblind-friendly palette. I’ll also take this opportunity to adjust the opacity down just a touch. This is a personal choice, but I find it nice to be able to see the grid behind such ink-heavy plots as area plots.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remember: unless you are making plots for a very small number of people and you know for certain that none are colorblind, <em>making inaccessible plots is</em> <em>inexcusable</em>. Of course, we all make mistakes, so if you ever notice an accessibility issue on my site, reach out and let me know on <a href="https://discord.gg/vF6W2bdKFH">Discord</a> or via a GitHub issue so I can improve for next time!</p>
</div>
</div>
<div class="cell">
<details>
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">LEVS <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oil &amp; NGL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Natural Gas"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cement"</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># our desired order</span></span>
<span id="cb4-2"></span>
<span id="cb4-3">emis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb4-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(commodity, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, commodity),</span>
<span id="cb4-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(commodity, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> LEVS) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># re-order </span></span>
<span id="cb4-8">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, commodity) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emissions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(emissions), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-11">  </span>
<span id="cb4-12">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># start of plot --------------------------------------------------------------</span></span>
<span id="cb4-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> emissions, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> commodity)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_area</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># drop the opacity just a touch</span></span>
<span id="cb4-15"></span>
<span id="cb4-16">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add theme and colors (love you, ggthemes) </span></span>
<span id="cb4-17">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_colorblind</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-18">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_fivethirtyeight</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_05212024_files/figure-html/step-four-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>And just like that, it feels like we are almost there! Let’s change a few things at once. We will change the background color, add the title/subtitle/axis labels/caption, and format the <img src="https://latex.codecogs.com/png.latex?y">-axis to read <code>30k</code> instead of <code>30000</code>. That will give us a feel for the final color scheme and how the fonts feel on the page. Because of the subscript “2” in <img src="https://latex.codecogs.com/png.latex?CO_2">, I will use the <code>latex2exp</code> package use <img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> typesetting in the plot.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>One note that is unique to this plot. When we use <code>theme_fivethirtyeight</code>, it removes the <img src="https://latex.codecogs.com/png.latex?y">-axis title. So, although we normally wouldn’t have to explicitly set the axis title to <code>element_text</code> in the <code>theme</code> function, we will here.</p>
</div>
</div>
<div class="cell">
<details>
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">LEVS <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oil &amp; NGL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Natural Gas"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cement"</span>)</span>
<span id="cb5-2">BG_COLOR <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#F0F0F0"</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># this will be our background color</span></span>
<span id="cb5-3"></span>
<span id="cb5-4">emis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb5-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(commodity, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, commodity),</span>
<span id="cb5-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(commodity, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> LEVS) </span>
<span id="cb5-9">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, commodity) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emissions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(emissions), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-12">  </span>
<span id="cb5-13">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># start of plot --------------------------------------------------------------</span></span>
<span id="cb5-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> emissions, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> commodity)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_area</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-16"></span>
<span id="cb5-17">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_colorblind</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-18">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_fivethirtyeight</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-19"></span>
<span id="cb5-20">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># abbreviate the y axis labels using the scales package</span></span>
<span id="cb5-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> scales<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">label_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scale =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e-3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">suffix =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"k"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-22"></span>
<span id="cb5-23">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add labels to the plot -----------------------------------------------------</span></span>
<span id="cb5-24">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb5-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb5-26">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Emissions ($MtCO_2e$)"</span>), <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># LaTeX typesetting with TeX()</span></span>
<span id="cb5-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Our World in Emissions"</span>,</span>
<span id="cb5-28">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(</span>
<span id="cb5-29">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb5-30">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Emissions are measured in Millions of Tons of $CO_2$ equivalent"</span>,</span>
<span id="cb5-31">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"($MtCO_2e$)"</span></span>
<span id="cb5-32">      )</span>
<span id="cb5-33">    ),</span>
<span id="cb5-34">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb5-35">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Made with love by Mitch Harrison"</span>,</span>
<span id="cb5-36">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># long blank line to "hack" a an annotation in the bottom-left corner</span></span>
<span id="cb5-37">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"                                                                       "</span>,</span>
<span id="cb5-38">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Source: Carbon Majors database and TidyTuesday"</span></span>
<span id="cb5-39">    )</span>
<span id="cb5-40">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-41">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb5-42">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb5-43">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> BG_COLOR) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># change background color</span></span>
<span id="cb5-44">  ) </span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_05212024_files/figure-html/step-five-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>You could submit this plot for public consumption without shame, but we can do better! For example, I think we could safely remove the legend by annotating the colors directly on the plot. Let’s use a <code>geom_text</code> to do just that. While this entire process has been creative, we are getting into highly subjective territory here. So if you don’t like these changes, do something else! I would love to see your ideas.</p>
<p>To make the annotations, I want the text to be right-justified and directly atop one another. To accomplish that, I will give <code>geom_text</code> a single <img src="https://latex.codecogs.com/png.latex?x"> value but several <img src="https://latex.codecogs.com/png.latex?y"> values (one for each category).</p>
<div class="cell">
<details>
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">LEVS <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oil &amp; NGL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Natural Gas"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cement"</span>)</span>
<span id="cb6-2">BG_COLOR <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#F0F0F0"</span></span>
<span id="cb6-3"></span>
<span id="cb6-4">emis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb6-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(commodity, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, commodity),</span>
<span id="cb6-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(commodity, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> LEVS) </span>
<span id="cb6-9">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, commodity) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emissions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(emissions), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-12">  </span>
<span id="cb6-13">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># start of plot --------------------------------------------------------------</span></span>
<span id="cb6-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> emissions, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> commodity)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_area</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-16"></span>
<span id="cb6-17">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_colorblind</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-18">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_fivethirtyeight</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> scales<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">label_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scale =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e-3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">suffix =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"k"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-20"></span>
<span id="cb6-21">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add annotation text to replace the legend ----------------------------------</span></span>
<span id="cb6-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">annotate</span>(</span>
<span id="cb6-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span id="cb6-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>,</span>
<span id="cb6-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span>,</span>
<span id="cb6-26">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4700</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">26000</span>),</span>
<span id="cb6-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cement"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Natural Gas"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oil &amp; NGL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>),</span>
<span id="cb6-28">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span>,</span>
<span id="cb6-29">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fontface =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span></span>
<span id="cb6-30">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-31"></span>
<span id="cb6-32">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb6-33">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb6-34">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Emissions ($MtCO_2e$)"</span>),</span>
<span id="cb6-35">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Our World in Emissions"</span>,</span>
<span id="cb6-36">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(</span>
<span id="cb6-37">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb6-38">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Emissions are measured in Millions of Tons of $CO_2$ equivalent"</span>,</span>
<span id="cb6-39">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"($MtCO_2e$)"</span></span>
<span id="cb6-40">      )</span>
<span id="cb6-41">    ),</span>
<span id="cb6-42">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb6-43">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Made with love by Mitch Harrison"</span>,</span>
<span id="cb6-44">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"                                                                       "</span>,</span>
<span id="cb6-45">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Source: Carbon Majors database and TidyTuesday"</span></span>
<span id="cb6-46">    )</span>
<span id="cb6-47">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-48"></span>
<span id="cb6-49">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb6-50">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># hide the legend</span></span>
<span id="cb6-51">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb6-52">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> BG_COLOR)</span>
<span id="cb6-53">  ) </span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_05212024_files/figure-html/step-six-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Nailed it. Now, I will happily take criticism here. I don’t love that the “Cement” label isn’t entirely encompassed by its data. But I think it’s much cleaner than having a legend drawing our eye away from the plot, so I’ll keep it.</p>
<p>The last thing we have to do before we can worry about the big annotation in the middle of the plot is change where the axes break. That is, set the years and emission amount displayed on the x and y axes, respectively. And while I’m at it, I will use a <code>geom_hline</code> to make the <img src="https://latex.codecogs.com/png.latex?x">-axis a bit bolder since it melts into the background a little bit too much for my liking.</p>
<div class="cell">
<details>
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">LEVS <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oil &amp; NGL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Natural Gas"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cement"</span>)</span>
<span id="cb7-2">BG_COLOR <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#F0F0F0"</span></span>
<span id="cb7-3">GRAY <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray35"</span></span>
<span id="cb7-4"></span>
<span id="cb7-5">emis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb7-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(commodity, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, commodity),</span>
<span id="cb7-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(commodity, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> LEVS) </span>
<span id="cb7-10">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, commodity) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emissions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(emissions), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-13">  </span>
<span id="cb7-14">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># start of plot --------------------------------------------------------------</span></span>
<span id="cb7-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> emissions, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> commodity)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_area</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-17"></span>
<span id="cb7-18">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_colorblind</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-19">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_fivethirtyeight</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-20"></span>
<span id="cb7-21">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># change where the axis breaks occur -----------------------------------------</span></span>
<span id="cb7-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(</span>
<span id="cb7-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5000</span>), </span>
<span id="cb7-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> scales<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">label_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scale =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e-3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">suffix =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"k"</span>)</span>
<span id="cb7-26">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-27"></span>
<span id="cb7-28">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">annotate</span>(</span>
<span id="cb7-29">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span id="cb7-30">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>,</span>
<span id="cb7-31">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span>,</span>
<span id="cb7-32">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4700</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">26000</span>),</span>
<span id="cb7-33">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cement"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Natural Gas"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oil &amp; NGL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>),</span>
<span id="cb7-34">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span>,</span>
<span id="cb7-35">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fontface =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span></span>
<span id="cb7-36">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-37"></span>
<span id="cb7-38">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb7-39">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb7-40">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Emissions ($MtCO_2e$)"</span>),</span>
<span id="cb7-41">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Our World in Emissions"</span>,</span>
<span id="cb7-42">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(</span>
<span id="cb7-43">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb7-44">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Emissions are measured in Millions of Tons of $CO_2$ equivalent"</span>,</span>
<span id="cb7-45">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"($MtCO_2e$)"</span></span>
<span id="cb7-46">      )</span>
<span id="cb7-47">    ),</span>
<span id="cb7-48">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb7-49">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Made with love by Mitch Harrison"</span>,</span>
<span id="cb7-50">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"                                                                       "</span>,</span>
<span id="cb7-51">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Source: Carbon Majors database and TidyTuesday"</span></span>
<span id="cb7-52">    )</span>
<span id="cb7-53">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-54"></span>
<span id="cb7-55">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> GRAY) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># bold axis</span></span>
<span id="cb7-56">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb7-57">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># hide the legend</span></span>
<span id="cb7-58">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb7-59">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> BG_COLOR)</span>
<span id="cb7-60">  ) </span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_05212024_files/figure-html/step-seven-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Once I write-in the line breaks, I’ll use the <code>annotate</code> function as before. But that’s not all. By default, there is no background with text annotations, so the grid overlaps the text and decreases legibility. To fix this, I’ll use <code>annotate</code> to put a rectangle the same color as the plot background behind the text, which “removes” the grid lines behind the text.</p>
<p>Finally, to accomplish the arrow, we will use our final <code>annotate</code> to draw a line segment and put an arrowhead at the end.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Normally, the order that we put things in a <code>ggplot2</code> pipeline doesn’t matter. But here, if you put the background rectangle after the text annotation, it will cover the text, rendering it invisible.</p>
</div>
</div>
<p>Because this is our last edit, I will take this opportunity to make one very oft-forgotten change: write my alt text. Since you’re here, I know you respect the power of data communication. Alt text lets us communicate with those who sometimes miss out on learning from plots online. As our color palette did for colorblind viewers, we owe it to our non-sighted friends to let them participate.</p>
<p>And finally, I’ll change the aspect ratio of the plot. You may have heard of the <a href="https://en.wikipedia.org/wiki/Golden_ratio">golden ratio</a>, which is a ratio that many humans find inherently satisfying to look at. That ratio is approximately 1.618:1. The inverse of that number is 0.618, which will be our horizontal aspect ratio (1.618 is vertical). Because the quarto headers won’t render with the document, my final header is below:</p>
<pre><code>#| label: plt-final
#| fig-width: 8
#| fig-align: "center"
#| fig-asp: 0.618
#| fig-alt: |
#|   This plot is titled Our World in Emissions. It is an area plot that shows
#|   global emissions over time by type. The types are coal, natural gas,
#|   cement, and oil and NGL. The plot notes that in 1995, the UN first met to
#|   discuss the climate threat. The plot shows near-zero emissions from 1900 to
#|   1920, when a slow increase begins. From there, emission growth seems to be
#|   exponentially increasing, with no decline since the UN first met. Coal is
#|   the largest emitter, then oil and NGL, then natural gas, and finally,
#|   cement.</code></pre>
<p>Now, let’s see the plot!</p>
<div class="cell" data-layout-align="center" data-fig.asp="0.618">
<details>
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># constants for ease of code legibility ----------------------------------------</span></span>
<span id="cb9-2">LEVS <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oil &amp; NGL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Natural Gas"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cement"</span>)</span>
<span id="cb9-3">BG_COLOR <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#F0F0F0"</span></span>
<span id="cb9-4">UN_TEXT <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb9-5">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"In 1995, the United Nations</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Conference of the Parties met for</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">the first"</span>, </span>
<span id="cb9-6">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"time to discuss the looming</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">threat of climate change. The COP</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">has"</span>,</span>
<span id="cb9-7">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"met twenty-eight times since."</span></span>
<span id="cb9-8">)</span>
<span id="cb9-9"></span>
<span id="cb9-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># data cleanup -----------------------------------------------------------------</span></span>
<span id="cb9-11">emis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb9-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># lots of near-zero space without this filter</span></span>
<span id="cb9-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb9-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(commodity, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, commodity),</span>
<span id="cb9-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(commodity, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> LEVS) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># re-order areas</span></span>
<span id="cb9-16">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb9-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, commodity) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb9-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emissions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(emissions), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb9-19">  </span>
<span id="cb9-20">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># start of plot --------------------------------------------------------------</span></span>
<span id="cb9-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> emissions, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> commodity)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_area</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-23">  </span>
<span id="cb9-24">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># UN COP annotation text box -------------------------------------------------</span></span>
<span id="cb9-25"></span>
<span id="cb9-26">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># the arrow</span></span>
<span id="cb9-27">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">annotate</span>(</span>
<span id="cb9-28">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"segment"</span>,</span>
<span id="cb9-29">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1995</span>,</span>
<span id="cb9-30">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xend =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1995</span>,</span>
<span id="cb9-31">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">35500</span>,</span>
<span id="cb9-32">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yend =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20500</span>,</span>
<span id="cb9-33">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"solid"</span>,</span>
<span id="cb9-34">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linejoin =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"round"</span>,</span>
<span id="cb9-35">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb9-36">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"grey35"</span>,</span>
<span id="cb9-37">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">arrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrow</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"closed"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unit</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cm"</span>))</span>
<span id="cb9-38">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-39"></span>
<span id="cb9-40">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># the background rectangle (must be before the text)</span></span>
<span id="cb9-41">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">annotate</span>(</span>
<span id="cb9-42">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rect"</span>,</span>
<span id="cb9-43">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xmin =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1945.5</span>,</span>
<span id="cb9-44">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xmax =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1993.5</span>,</span>
<span id="cb9-45">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ymin =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">23500</span>,</span>
<span id="cb9-46">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ymax =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">35800</span>,</span>
<span id="cb9-47">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> BG_COLOR</span>
<span id="cb9-48">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-49"></span>
<span id="cb9-50">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># annotation text</span></span>
<span id="cb9-51">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">annotate</span>(</span>
<span id="cb9-52">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span id="cb9-53">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1992</span>,</span>
<span id="cb9-54">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30000</span>,</span>
<span id="cb9-55">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> UN_TEXT,</span>
<span id="cb9-56">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> GRAY,</span>
<span id="cb9-57">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fontface =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"italic"</span>,</span>
<span id="cb9-58">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span></span>
<span id="cb9-59">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-60">  </span>
<span id="cb9-61">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># replace legend with annotation text ----------------------------------------</span></span>
<span id="cb9-62">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">annotate</span>(</span>
<span id="cb9-63">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span id="cb9-64">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>,</span>
<span id="cb9-65">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span>,</span>
<span id="cb9-66">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4700</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">26000</span>),</span>
<span id="cb9-67">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cement"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Natural Gas"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oil &amp; NGL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>),</span>
<span id="cb9-68">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span>,</span>
<span id="cb9-69">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fontface =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span></span>
<span id="cb9-70">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-71">  </span>
<span id="cb9-72">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># visual style elements (love you, ggthemes) ---------------------------------</span></span>
<span id="cb9-73">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_colorblind</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-74">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_fivethirtyeight</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-75">  </span>
<span id="cb9-76">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># customize axis breaks and labels -------------------------------------------</span></span>
<span id="cb9-77">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-78">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(</span>
<span id="cb9-79">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5000</span>), </span>
<span id="cb9-80">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> scales<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">label_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scale =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e-3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">suffix =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"k"</span>)</span>
<span id="cb9-81">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-82">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb9-83">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb9-84">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Emissions ($MtCO_2e$)"</span>),</span>
<span id="cb9-85">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Our World in Emissions"</span>,</span>
<span id="cb9-86">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(</span>
<span id="cb9-87">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb9-88">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Emissions are measured in Millions of Tons of $CO_2$ equivalent"</span>,</span>
<span id="cb9-89">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"($MtCO_2e$)"</span></span>
<span id="cb9-90">      )</span>
<span id="cb9-91">    ),</span>
<span id="cb9-92">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb9-93">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Made with love by Mitch Harrison"</span>,</span>
<span id="cb9-94">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"                                                                       "</span>,</span>
<span id="cb9-95">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Source: Carbon Majors database and TidyTuesday"</span></span>
<span id="cb9-96">    )</span>
<span id="cb9-97">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb9-98">  </span>
<span id="cb9-99">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># theme cleanup --------------------------------------------------------------</span></span>
<span id="cb9-100">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> GRAY) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># bold axis</span></span>
<span id="cb9-101">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb9-102">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>, </span>
<span id="cb9-103">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb9-104">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> BG_COLOR)</span>
<span id="cb9-105">  ) </span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_05212024_files/figure-html/plt-final-1.png" class="img-fluid figure-img" alt="This plot is titled Our World in Emissions. It is an area plot that shows global emissions over time by type. The types are coal, natural gas, cement, and oil and NGL. The plot notes that in 1995, the UN first met to discuss the climate threat. The plot shows near-zero emissions from 1900 to 1920, when a slow increase begins. From there, emission growth seems to be exponentially increasing, with no decline since the UN first met. Coal is the largest emitter, then oil and NGL, then natural gas, and finally, cement." width="768"></p>
</figure>
</div>
</div>
</div>
<p>No plot is perfect, but I am happy with what we have accomplished, and I hope you are too! If you have any questions or corrections, feel free to reach out on <a href="https://discord.gg/vF6W2bdKFH">Discord</a>, and I’ll be happy to help. And, of course, if you want to contribute to this effort financially, you are more than welcome to <a href="https://buymeacoffee.com/mitchellharrison">buy me a coffee</a>.</p>
<p>Thanks for sticking around, and good luck with your TidyTuesday adventures!</p>



 ]]></description>
  <category>Data Viz</category>
  <guid>https://mitchellharrison.github.io/tutorials/tidytuesday_05212024.html</guid>
  <pubDate>Sun, 26 May 2024 19:51:32 GMT</pubDate>
  <media:content url="https://mitchellharrison.github.io/images/thumbnails/tidytuesday/05212024.png" medium="image" type="image/png" height="108" width="144"/>
</item>
</channel>
</rss>
