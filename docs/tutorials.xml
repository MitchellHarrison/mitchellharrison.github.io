<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Mitch&#39;s Website</title>
<link>https://mitchellharrison.github.io/tutorials.html</link>
<atom:link href="https://mitchellharrison.github.io/tutorials.xml" rel="self" type="application/rss+xml"/>
<description></description>
<generator>quarto-1.5.57</generator>
<lastBuildDate>Tue, 25 Mar 2025 18:57:49 GMT</lastBuildDate>
<item>
  <title>Hello, statistics. | Mathematical Statistics 0</title>
  <dc:creator>Mitch Harrison</dc:creator>
  <link>https://mitchellharrison.github.io/tutorials/math_stat_0.html</link>
  <description><![CDATA[ 




<section id="background" class="level1">
<h1>Background</h1>
<p>I recently finished <a href="https://stat.duke.edu/courses/theory-and-methods-statistical-learning-and-inference-0">STA 432</a> at Duke. For my fellow Duke students looking to take it: yes, it was that hard. But you’re smarter than me, so you will be fine! For the mathematically curious, the course is (somewhat longwindedly) called “Theory and Methods of Statistical Learning and Inference.” If, like me, you prefer helpful course names, call it “Mathematical Statistics.”</p>
<p>While in STA 432, I kept finding myself in mathematics far beyond the “Google the topic and find it on 100 websites” stage. In fact, the topics covered in the course were typically covered by sources that assumed a level of mathematical maturity that I did not possess. I kept thinking that I needed to pre-understand the material to understand the explanation of that same material. I longed for a plain-language introduction to mathematically rigorous subjects.</p>
<p>This series is my humble attempt to communicate the beauty of mathematical statistics in comprehensible English to my fellow students (at Duke or at home). To facilitate this, we will take a “trust my word for it” approach, with proofs being in separate articles. However, I recommend at least reading through any proofs that I post. Struggling through those should prepare you for problems involving those same concepts. Even in the proofs articles, I’ll go step-by-step (very granularly) for easy comprehension. That is not a luxury that professors get in a short lecture period, but I’ll take my time to make sure every step is annotated, which I wish I had when I was in 432.</p>
</section>
<section id="course-outline" class="level1">
<h1>Course Outline</h1>
<p>This course is broadly broken into three sections. First, we will study point <a href="https://en.wikipedia.org/wiki/Estimator">estimators</a>. If you’ve never heard of estimators, don’t worry. They’re just educated guesses at unknown distribution parameters (like the mean of a normal distribution). We will calculate estimators, study them, and choose between them.</p>
<p>In the middle portion of the course, we will look at <a href="https://en.wikipedia.org/wiki/Confidence_interval">confidence intervals</a>. Again, no background knowledge is necessary here. In effect, confidence intervals tell us how confident we are that our chosen estimator falls into a particular range. Any statisticians reading just cringed at my description because it isn’t technically accurate, but we will discuss why that’s the case when we get to confidence intervals. Don’t worry; it’ll be pretty intuitive once we get there.</p>
<p>Last but certainly not least, we will conduct <a href="https://en.wikipedia.org/wiki/Statistical_hypothesis_test">hypothesis tests</a>. There, we will choose two possible options for our estimator. For example, maybe we want to choose between X &gt; 5 or X &lt;= 5. We will use our data to decide which option is more likely to be correct. Of course, we will never be 100% of our guess, but we will get close.</p>
<p>And that’s the course! It sounds nice and clean, and in many ways it is. However, like with much of statistics, the findings are the easy part. Finding the findings is the challenge. But I’ll try my best to get us through it so your GPA can be better than mine.</p>
</section>
<section id="course-materials" class="level1">
<h1>Course Materials</h1>
<p>My course, which was run by Professor <a href="https://scholars.duke.edu/person/alexander.volfovsky">Alexander Volfovsky</a>, had very few requirements. There was a recommended textbook (found <a href="https://www.amazon.com/Probability-Statistics-4th-Morris-DeGroot/dp/0321500466">here</a>), which I found helpful to get a second perspective on topics. But if the price is off-putting, don’t worry. We only loosely followed it; apart from some homework questions, it was never explicitly required. So, for our purposes, I won’t reference the book directly. If you want a second perspective and don’t mind spending some coin, you have the Amazon link and can search the ISBN elsewhere.</p>
<p>Besides that, you’ll only need a willingness to learn and a statistical curiosity!</p>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>To get started with the course, click <a href="../tutorials/math_stat_0.html">here</a> to go to the first article in the series, where we begin our discussion of estimators! Of course, if you want to ask me anything about this course, my time at Duke, or anything else, the best place to reach me is on <a href="https://discord.gg/vF6W2bdKFH">Discord</a>! And if you really want to support this project, you can <a href="https://buymeacoffee.com/mitchellharrison">buy me a coffee</a>. Thank you for reading, and I can’t wait to get started!</p>


</section>

 ]]></description>
  <category>Statistics</category>
  <category>Mathematical Statistics</category>
  <guid>https://mitchellharrison.github.io/tutorials/math_stat_0.html</guid>
  <pubDate>Tue, 25 Mar 2025 18:57:49 GMT</pubDate>
  <media:content url="https://mitchellharrison.github.io/images/thumbnails/mathematical_statistics/0.png" medium="image" type="image/png" height="108" width="144"/>
</item>
<item>
  <title>Welcome to Estimators! | Mathematical Statistics 1</title>
  <dc:creator>Mitch Harrison</dc:creator>
  <link>https://mitchellharrison.github.io/tutorials/math_stat_1.html</link>
  <description><![CDATA[ 




<section id="introduction-to-point-estimation" class="level1">
<h1>Introduction to Point Estimation</h1>
<p>Say we have some data <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D">. It’s a vector, so just think of it like a list of <img src="https://latex.codecogs.com/png.latex?n"> numbers. We want to learn something about how these data came to be. First, we will aggregate our data using a <strong>statistic</strong>.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Definition
</div>
</div>
<div class="callout-body-container callout-body">
<p>Let <img src="https://latex.codecogs.com/png.latex?X_1,%20%5Ccdots,%20X_n"> be our data. A <strong>statistic</strong> is a function of that data. We will denote that statistic with <img src="https://latex.codecogs.com/png.latex?%5Cdelta">. Crucially, this function cannot contain anything that we don’t know. It is purely a function of known quantities.</p>
</div>
</div>
<section id="statistics" class="level2">
<h2 class="anchored" data-anchor-id="statistics">Statistics</h2>
<p>Let’s say that our data comes from a normal distribution (a “bell curve”). We denote this with <img src="https://latex.codecogs.com/png.latex?X%20%5Csim%20N(%5Cmu,%20%5Csigma%5E2)">, where <img src="https://latex.codecogs.com/png.latex?%5Cmu"> is the mean of the distribution and <img src="https://latex.codecogs.com/png.latex?%5Csigma%5E2"> is the variance. Also, to make our life easier, say we know the variance <img src="https://latex.codecogs.com/png.latex?%5Csigma%5E2">. In practice, this will basically never be the case, but it will simplify our math for now.</p>
<p>We have infinitely many options for statistics that we can choose. For example, we could use <img src="https://latex.codecogs.com/png.latex?X_1"> (that is, the first data point in our vector). While we leave some data on the table in that case, it is certainly a statistic since <img src="https://latex.codecogs.com/png.latex?%5Cdelta%20=%20X_1"> is a function of our data, and there are no unknowns.</p>
<p>Alternatively, we could use the observed mean of our data. We will call it <img src="https://latex.codecogs.com/png.latex?%5Coverline%7BX%7D"> (pronounced “<img src="https://latex.codecogs.com/png.latex?X"> bar”), and it is denoted with <img src="https://latex.codecogs.com/png.latex?%0A%5Cdelta(%5Cmathbf%7BX%7D)%20=%20%5Coverline%7BX%7D%20=%20%5Cfrac%7B1%7D%7Bn%7D%5Csum_%7Bi=1%7D%5En%20X_i.%0A"></p>
<p>Notice that this is also a statistic! Although it looks much more complicated, we are still using our data and no unknowns. Here, <img src="https://latex.codecogs.com/png.latex?n"> is the number of data points that we have, which we know. And we know every <img src="https://latex.codecogs.com/png.latex?X_i"> because each is part of our data vector <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D">.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Constants (e.g., 7) are also statistics, although no data are involved in the calculation. If it feels like you’re just guessing at random if you do this, you’re right.</p>
</div>
</div>
<p>Now let’s look at an example of a function that is <em>not</em> a statistic: <img src="https://latex.codecogs.com/png.latex?%0A%5Cdelta(%5Cmathbf%7BX%7D)%20=%20T%20=%20%5Cfrac%7B%5Coverline%7BX%7D%20-%20%5Cmu%7D%7B%5Csigma/%5Csqrt%7Bn%7D%7D.%0A"> This function will come back in future articles, but for now, recall that we said that we already know the variance <img src="https://latex.codecogs.com/png.latex?%5Csigma%5E2">. So that means we already know <img src="https://latex.codecogs.com/png.latex?%5Csigma">. We also know <img src="https://latex.codecogs.com/png.latex?n">, as we mentioned earlier. But <img src="https://latex.codecogs.com/png.latex?%5Cmu"> is unknown to us. Because we have an unknown value <img src="https://latex.codecogs.com/png.latex?%5Cmu"> in the numerator, <img src="https://latex.codecogs.com/png.latex?T"> is <em>not</em> a statistic.</p>
<hr>
</section>
</section>
<section id="point-estimators" class="level1">
<h1>Point Estimators</h1>
<p>To use a plain-language term that is largely despised among statisticians, we want to “guess” (*<em>gasp</em>*) at the value of our unknown parameter. In the previous example, that parameter was <img src="https://latex.codecogs.com/png.latex?%5Cmu">. To be more general, we will use the Greek letter <img src="https://latex.codecogs.com/png.latex?%5Ctheta"> (pronounced “theta”) since <img src="https://latex.codecogs.com/png.latex?%5Cmu"> is often saved for the mean of a normal distribution.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Definition
</div>
</div>
<div class="callout-body-container callout-body">
<p>Say we have data <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D"> that comes from some probability distribution with an unknown parameter <img src="https://latex.codecogs.com/png.latex?%5Ctheta"> that has some <em>true</em> fixed value. A <strong>point estimator</strong> is a statistic that estimates the true value of <img src="https://latex.codecogs.com/png.latex?%5Ctheta">, and is denoted by <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Ctheta%7D">. That is, <img src="https://latex.codecogs.com/png.latex?%0A%5Chat%7B%5Ctheta%7D%20=%20%5Cdelta(%5Cmathbf%7BX%7D).%0A"></p>
</div>
</div>
<section id="point-estimator-example" class="level2">
<h2 class="anchored" data-anchor-id="point-estimator-example">Point estimator example</h2>
<p>Let’s keep going with our data, which comes from a normal distribution. But, to get used to using <img src="https://latex.codecogs.com/png.latex?%5Ctheta">, say that <img src="https://latex.codecogs.com/png.latex?X%20%5Csim%20N(%5Ctheta,%20%5Csigma%5E2)">. One possible estimator is the example mean <img src="https://latex.codecogs.com/png.latex?%5Coverline%7BX%7D"> from earlier (i.e., the mean of the observed data). Alternatively, we can use a constant: say 5. Intuitively, it feels like <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Ctheta%7D%20=%20%5Coverline%7BX%7D"> would be a better guess than a simple <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Ctheta%7D%20=%205">, because it is actually informed by the data. But how do we quantify that intuition? We will calculate and compare both <em>bias</em> and <em>precision</em> for each.</p>
<section id="bias" class="level3">
<h3 class="anchored" data-anchor-id="bias">Bias</h3>
<p><strong>Bias</strong> tells us how often, on average, we get the correct value of our unknown parameter <img src="https://latex.codecogs.com/png.latex?%5Ctheta">. Mathematically, we hope that the following quantity is as small as possible: <img src="https://latex.codecogs.com/png.latex?%0A%5Cmathbb%7BE%7D%5B%5Cdelta(%5Cmathbf%7BX%7D)%20%7C%20%5Ctheta%5D%20-%20%5Ctheta.%0A"></p>
<p>The confusing-looking term <img src="https://latex.codecogs.com/png.latex?%5Cmathbb%7BE%7D%5B%5Ccdot%5D"> is the expected value of our estimator, given the value of the unknown parameter <img src="https://latex.codecogs.com/png.latex?%5Ctheta">. Basically, this is the expected value of <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Ctheta%7D">. If our estimator <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Ctheta%7D"> is expected to be exactly correct on average, then this whole term will be 0, which is the smallest possible bias.</p>
</section>
<section id="variance" class="level3">
<h3 class="anchored" data-anchor-id="variance">Variance</h3>
<p><strong>Variance</strong> describes the variability of our estimator. Ideally, variance is also small. Intuitively we are less “sure” about our estimate if we have a wider variance. We denote variance with <img src="https://latex.codecogs.com/png.latex?Var(%5Cdelta(%5Cmathbf%7BX%7D)%7C%5Ctheta)">.</p>
<p>However, notice that both bias and variance are conditional on the true value of our unknown parameter <img src="https://latex.codecogs.com/png.latex?%5Ctheta">. Thus, we cannot calculate these quantities directly. To deal with this, we will introduce the concept of <strong>loss</strong> in the next article <a href="../tutorials/math_stat_2.html">here</a>!</p>


</section>
</section>
</section>

 ]]></description>
  <category>Statistics</category>
  <category>Mathematical Statistics</category>
  <guid>https://mitchellharrison.github.io/tutorials/math_stat_1.html</guid>
  <pubDate>Tue, 25 Mar 2025 18:57:49 GMT</pubDate>
  <media:content url="https://mitchellharrison.github.io/images/thumbnails/mathematical_statistics/1.png" medium="image" type="image/png" height="108" width="144"/>
</item>
<item>
  <title>The Bias-Variance Tradeoff | Mathematical Statistics 2</title>
  <dc:creator>Mitch Harrison</dc:creator>
  <link>https://mitchellharrison.github.io/tutorials/math_stat_2.html</link>
  <description><![CDATA[ 




<section id="loss" class="level1">
<h1>Loss</h1>
<p><a href="../tutorials/math_stat_1.html">Last time</a>, we noted that we cannot precisely calculate bias or variance since they are conditional on the parameter we are estimating in the first place. If we knew that value, we wouldn’t need an estimator. Ideally, our estimators would be as close as possible to the true value of our unknown parameter <img src="https://latex.codecogs.com/png.latex?%5Ctheta">, but there may be infinitely many possible values for <img src="https://latex.codecogs.com/png.latex?%5Ctheta">. Instead, we will seek to be close to a <em>range</em> of possible values of <img src="https://latex.codecogs.com/png.latex?%5Ctheta">.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Definition
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Closeness</strong> describes how much we are willing to “pay” to be some “distance” away from the true value of <img src="https://latex.codecogs.com/png.latex?%5Ctheta">. We will measure this distance with a function (called a <strong>loss function</strong>), which is denoted as:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cell(%5Ctheta,%20a).%0A"> This notation is somewhat confusing, because we are now using <img src="https://latex.codecogs.com/png.latex?a"> to denote our estimate instead of <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Ctheta%7D">. So you can think of it as <img src="https://latex.codecogs.com/png.latex?%5Cell(%5Ctheta,%20%5Chat%7B%5Ctheta%7D)"> if that is more helpful (as it is for me).</p>
</div>
</div>
<p>As an example, if we choose a loss function,</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cell(%5Ctheta,%20%5Chat%7B%5Ctheta%7D)%20=%20(%5Ctheta%20-%20%5Chat%7B%5Ctheta%7D)%5E2,%0A"> then we have arrived at the <em>squared-error loss</em> function. Observe that the difference between our guess and the true value is the error, and we are squaring that value. If we take the mean of that function, we arrive at a critical value in mathematical statistics that you may have heard of: the <strong>mean-squared error</strong> (MSE).</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Definition
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Risk</strong> is the expected loss for a given loss function <img src="https://latex.codecogs.com/png.latex?%5Cell">. Mathematically, it is denoted as <img src="https://latex.codecogs.com/png.latex?%0AR_%7B%5Cdelta%7D(%5Ctheta)%20=%20%5Cmathbb%7BE%7D_%7BX%7C%5Ctheta%7D%5B%5Cell(%5Ctheta,%20%5Cdelta(%5Cmathbf%7BX%7D))%5D,%0A"> where <img src="https://latex.codecogs.com/png.latex?%5Cdelta(%5Cmathbf%7BX%7D)"> is the function that gives us our estimator. In effect, the risk is the expected loss given some loss function <img src="https://latex.codecogs.com/png.latex?%5Cell(%5Ctheta,%5Chat%7B%5Ctheta%7D)">.</p>
</div>
</div>
<p>We will get back to loss next time.</p>
</section>
<section id="the-bias-variance-tradeoff" class="level1">
<h1>The Bias-Variance Tradeoff</h1>
<section id="worked-example-bias" class="level2">
<h2 class="anchored" data-anchor-id="worked-example-bias">Worked example: bias</h2>
<p>Let’s work on our first example problem to nail some things down. Let our data <img src="https://latex.codecogs.com/png.latex?X_1,%20%5Ccdots,%20X_n%20%5Csim%20N(%5Cmu,%20%5Csigma%5E2)">, and let each data point be independent and identically distributed (iid). Like last time, <img src="https://latex.codecogs.com/png.latex?%5Csigma%5E2"> is fixed and known. We are interested in estimating <img src="https://latex.codecogs.com/png.latex?%5Cmu">. Recall our two estimators from the previous article:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Balign*%7D%0A%5Cdelta_1(%5Cmathbf%7BX%7D)%20&amp;=%20%5Coverline%7BX%7D%20%5C%5C%0A%5Cdelta_2(%5Cmathbf%7BX%7D)%20&amp;=%205.%0A%5Cend%7Balign*%7D%0A"></p>
<p>The expected value of <img src="https://latex.codecogs.com/png.latex?%5Cdelta_2"> is 5. Let’s find the expected value of <img src="https://latex.codecogs.com/png.latex?%5Cdelta_1">. Recall our generic formula for the expectation of an estimator is <img src="https://latex.codecogs.com/png.latex?%5Cmathbb%7BE%7D(%5Cdelta(%5Cmathbf%7BX%7D)%20%7C%20%5Ctheta)"> for some estimator <img src="https://latex.codecogs.com/png.latex?%5Cdelta"> and true value <img src="https://latex.codecogs.com/png.latex?%5Ctheta">. In this case, our estimator is <img src="https://latex.codecogs.com/png.latex?%5Coverline%7BX%7D"> and our parameter is <img src="https://latex.codecogs.com/png.latex?%5Cmu">. Thus: <img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Balign*%7D%0A%5Cmathbb%7BE%7D(%5Cdelta_1(%5Cmathbf%7BX%7D)%7C%5Ctheta)%20&amp;=%20%5Cmathbb%7BE%7D(%5Coverline%7BX%7D%20%7C%20%5Cmu)%20%5C%5C%0A&amp;=%20%5Cmathbb%7BE%7D%5Cleft%5B%5Cfrac%7B%5Csum_%7Bi=1%7D%5EnX_i%7D%7Bn%7D%5Cright%5D%0A&amp;%20%5Ctext%7Bexpanding%20out%20%7D%5Coverline%7BX%7D%20%5C%5C%0A&amp;=%20%5Cfrac%7B1%7D%7Bn%7D%5Csum_%7Bi=1%7D%5En%5Cmathbb%7BE%7D(X_i%7C%5Cmu)%0A&amp;%20%5Ctext%7Bexpectation%20can%20be%20distributed%20into%20sums%7D%20%5C%5C%0A&amp;=%20%5Cfrac%7B1%7D%7Bn%7D%5Csum_%7Bi=1%7D%5En%5Cmu%0A&amp;%20%5Ctext%7Bbecause%20%7D%20%5Cmathbb%7BE%7D(X_i)%20=%20%5Cmu%20%5Ctext%7B%20for%20any%20%7Di%5C%5C%0A&amp;=%20%5Cfrac%7Bn%5Cmu%7D%7Bn%7D%20%5C%5C%0A&amp;=%20%5Cmu%0A%5Cend%7Balign*%7D%0A"></p>
<p>We have a bias of zero! That means that the expected value of our estimator is precisely equivalent to our unknown parameter. It feels like we have solved statistics, right? Well… no. But we will get to that in a moment. For now, let’s visualize bias.</p>
<p>Let’s say that the true (but unknown to us) value of <img src="https://latex.codecogs.com/png.latex?%5Cmu"> is 1. One of our estimators was the constant 5. If we let 5 be our guess for the mean, we are saying, “I think the distribution is centered on 5,” when in reality, it is centered on 1. That difference is shown below.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-2"></span>
<span id="cb1-3">SIGMA <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># this is our fixed and known standard deviation</span></span>
<span id="cb1-4">MU <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># this is our true but unknown value</span></span>
<span id="cb1-5">MU_HAT <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># this is our estimator</span></span>
<span id="cb1-6"></span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb1-8">  </span>
<span id="cb1-9">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plot the true distribution</span></span>
<span id="cb1-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stat_function</span>(</span>
<span id="cb1-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fun =</span> dnorm,</span>
<span id="cb1-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">args =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> MU, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> SIGMA),</span>
<span id="cb1-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"coral3"</span>,</span>
<span id="cb1-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb1-15">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_vline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xintercept =</span> MU, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"coral3"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">annotate</span>(</span>
<span id="cb1-18">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span id="cb1-19">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span>,</span>
<span id="cb1-20">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb1-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>,</span>
<span id="cb1-22">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"$N(1, </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">sigma^2)$"</span>),</span>
<span id="cb1-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"coral3"</span></span>
<span id="cb1-24">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-25">  </span>
<span id="cb1-26">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plot the estimated distribution</span></span>
<span id="cb1-27">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stat_function</span>(</span>
<span id="cb1-28">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fun =</span> dnorm,</span>
<span id="cb1-29">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">args =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> MU_HAT, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> SIGMA),</span>
<span id="cb1-30">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cyan4"</span>,</span>
<span id="cb1-31">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb1-32">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-33">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_vline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xintercept =</span> MU_HAT, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cyan4"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-34">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">annotate</span>(</span>
<span id="cb1-35">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span id="cb1-36">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span>,</span>
<span id="cb1-37">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6.8</span>,</span>
<span id="cb1-38">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>,</span>
<span id="cb1-39">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"$N(5, </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">sigma^2)$"</span>),</span>
<span id="cb1-40">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cyan4"</span></span>
<span id="cb1-41">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-42">  </span>
<span id="cb1-43">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># annotation arrow</span></span>
<span id="cb1-44">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">annotate</span>(</span>
<span id="cb1-45">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"segment"</span>,</span>
<span id="cb1-46">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> MU,</span>
<span id="cb1-47">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xend =</span> MU_HAT,</span>
<span id="cb1-48">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">19</span>,</span>
<span id="cb1-49">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yend =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">19</span>,</span>
<span id="cb1-50">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">arrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrow</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unit</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cm"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ends =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"both"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"closed"</span>)</span>
<span id="cb1-51">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-52">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">annotate</span>(</span>
<span id="cb1-53">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span id="cb1-54">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>,</span>
<span id="cb1-55">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>,</span>
<span id="cb1-56">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bias"</span>,</span>
<span id="cb1-57">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fontface =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span></span>
<span id="cb1-58">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-59">  </span>
<span id="cb1-60">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># aesthetic fixes</span></span>
<span id="cb1-61">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-62">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">mu"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-63">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">limits =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-64">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb1-65">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb1-66">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.line.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb1-67">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.ticks.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb1-68">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb1-69">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid.major.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb1-70">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid.minor.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb1-71">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.line.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_line</span>()</span>
<span id="cb1-72">  )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://mitchellharrison.github.io/tutorials/math_stat_2_files/figure-html/visualize-bias-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As we can see, the smaller our bias, the closer our guess becomes to the true value of our parameter. We can also see that a bias of zero is ideal. But there is more to an estimator than bias. Let’s move on to variance.</p>
</section>
<section id="worked-example-variance" class="level2">
<h2 class="anchored" data-anchor-id="worked-example-variance">Worked example: variance</h2>
<p>Formally, the variance of an estimator is the expected value of the squared sampling deviations. But that explanation might not be conceptually helpful. So, let’s see an example.</p>
<p>Say a city has a population of 1,000,000. We want to get the average height of everyone in town. So we sample 1,000 people, measure their height, and use some function to calculate an estimator. We have used the same two estimators so far, <img src="https://latex.codecogs.com/png.latex?%5Cdelta_1%20=%20%5Coverline%7BX%7D"> and <img src="https://latex.codecogs.com/png.latex?%5Cdelta_2%20=%205">, so we will continue with those.</p>
<p>Depending on the height of everyone in our 1,000-person sample, we will get a different <img src="https://latex.codecogs.com/png.latex?%5Coverline%7BX%7D"> each time we take a sample. If we take 100 samples of 1,000 people per sample, we will (probably) arrive at 100 distinct values of <img src="https://latex.codecogs.com/png.latex?%5Coverline%7BX%7D">. But if we use 5 as our estimator (perhaps to mean 5 feet tall), there will be no such variation in our estimator.</p>
<p>The measure of how much our estimator fluctuates as we take more and more samples is a helpful, intuitive understanding of variance. Ideally, we want to have as little variance as possible. We know our estimator has no variance if we use a constant (a number is always just that number), but what about <img src="https://latex.codecogs.com/png.latex?%5Coverline%7BX%7D">? Let’s calculate.</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Balign*%7D%0AVar%5B%5Cdelta_1(%5Cmathbf%7BX%7D)%7C%5Cmu%5D%20&amp;=%20Var(%5Coverline%7BX%7D)%20%5C%5C%0A&amp;=%20Var%5Cleft%5B%5Cfrac%7B1%7D%7Bn%7D%5Csum_%7Bi=1%7D%5EnX_i%5Cright%5D%0A&amp;%20%5Ctext%7Bexpanding%20out%20%7D%20%5Coverline%7BX%7D%20%5C%5C%0A&amp;=%20%5Cfrac%7B1%7D%7Bn%5E2%7D%5Csum_%7Bi=1%7D%5EnVar(X_i)%0A&amp;%20%5Ctext%7Bmust%20square%20constants%20when%20factoring%20out%20of%20variance%7D%20%5C%5C%0A&amp;=%20%5Cfrac%7B1%7D%7Bn%5E2%7D%5Csum_%7Bi=1%7D%5En%5Csigma%5E2%0A&amp;%20Var(X_i)%20=%20%5Csigma%5E2%20%5Ctext%7B%20is%20fixed%20and%20known%7D%20%5C%5C%0A&amp;=%20%5Cfrac%7Bn%5Csigma%5E2%7D%7Bn%5E2%7D%20%5C%5C%0A&amp;=%20%5Cfrac%7B%5Csigma%5E2%7D%7Bn%7D%0A%5Cend%7Balign*%7D%0A"></p>
<p>Notice that this value is a positive number, which means the variance of <img src="https://latex.codecogs.com/png.latex?%5Cdelta_1%20=%20%5Coverline%7BX%7D"> is higher than the variance of <img src="https://latex.codecogs.com/png.latex?%5Cdelta_2%20=%205">, which is zero.</p>
</section>
<section id="the-tradeoff" class="level2">
<h2 class="anchored" data-anchor-id="the-tradeoff">The Tradeoff</h2>
<p>This phenomenon, where one estimator has better bias and the other has better variance, is an example of a central balancing act that statisticians have to perform: the <strong>bias-variance tradeoff</strong>. We have seen an estimator with no bias but positive variance (<img src="https://latex.codecogs.com/png.latex?%5Coverline%7BX%7D">) and another with no variance but non-zero bias (5). How do we know which is better? We will explore that question in the following article when we explore this tradeoff more deeply.</p>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>We are making steady progress, but we have much learning ahead! If you have any questions or suggestions, you can always pop into my <a href="https://discord.gg/vF6W2bdKFH">Discord server</a> and ask me directly. If you find any value in this work and want to support me financially, you can <a href="https://buymeacoffee.com/mitchellharrison">buy me a coffee</a>. Thank you for reading, and see you next time!</p>


</section>

 ]]></description>
  <category>Statistics</category>
  <category>Mathematical Statistics</category>
  <guid>https://mitchellharrison.github.io/tutorials/math_stat_2.html</guid>
  <pubDate>Tue, 25 Mar 2025 18:57:49 GMT</pubDate>
  <media:content url="https://mitchellharrison.github.io/images/thumbnails/mathematical_statistics/2.png" medium="image" type="image/png" height="108" width="144"/>
</item>
<item>
  <title>Jensen’s Inequality | Mathematical Statistics 3</title>
  <dc:creator>Mitch Harrison</dc:creator>
  <link>https://mitchellharrison.github.io/tutorials/math_stat_3.html</link>
  <description><![CDATA[ 




<section id="review" class="level1">
<h1>Review</h1>
<p>Hello again! Last time, we found the bias and variance of two different estimators and discussed the <em>bias-variance tradeoff</em>. Now that we have some necessary background knowledge, let’s discuss balancing bias and variance to find a better estimator. Recall that we want our estimator to be accurate (have a small bias) and precise (have a small variance).</p>
<p>We mentioned the mean squared error (MSE) as a common way of analyzing an estimator. In the below equality, we only discussed the left-hand side. But now that we know what bias and variance are, we can observe a new (but equivalent) definition of the MSE:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cmathbb%7BE%7D%5B(%5Cdelta(%5Cmathbf%7BX%7D)%20-%20%5Ctheta)%5E2%5D%20=%0AVar%5B%5Cdelta(%5Cmathbf%7BX%7D)%20%7C%20%5Ctheta%5D%20+%20bias%5E2%5B%5Cdelta(%5Cmathbf%7BX%7D)%20%7C%20%5Ctheta%5D.%0A"></p>
<p>There, <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D"> is our data, <img src="https://latex.codecogs.com/png.latex?%5Ctheta"> is our unknown parameter, <img src="https://latex.codecogs.com/png.latex?%5Cdelta(%5Cmathbf%7BX%7D)"> is our estimator, and <img src="https://latex.codecogs.com/png.latex?bias%5E2%5B%5Ccdot%5D"> denotes our estimator’s bias squared.</p>
</section>
<section id="jensens-inequality" class="level1">
<h1>Jensen’s Inequality</h1>
<p>We can often “pay” a little bit of bias to reduce variance, or a little bit of variance to reduce bias. We are tasked with choosing ways of optimizing these two. One common method is minimizing the MSE, but there are infinitely many possible methods to choose from.</p>
<section id="bias-example" class="level2">
<h2 class="anchored" data-anchor-id="bias-example">Bias example</h2>
<p>We are scientists. We are confident that the machine in our lab is working, and it is spitting out data that comes from the following distribution:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0AX_1,%20%5Ccdots,%20X_n%20%5Coverset%7B%5Cmathrm%7Biid%7D%7D%7B%5Csim%7D%20Exp(%5Ctheta).%0A"></p>
<p>The expected value (mean) of an exponential distribution is <img src="https://latex.codecogs.com/png.latex?%5Cmathbb%7BE%7D%5BX%5D%20=%201/%20%5Ctheta">. We also know (or find on <a href="https://en.wikipedia.org/wiki/Exponential_distribution">Wikipedia</a>) that the probability density function (PDF) of an exponential is given by:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0Af_%20%5Ctheta(x)%20=%20%5Ctheta%20e%5E%7B-%20%5Ctheta%20x%7D.%0A"></p>
<p>Our goal is to study <img src="https://latex.codecogs.com/png.latex?%5Ctheta">. Let’s re-arrange the expected value of the exponential distribution to isolate <img src="https://latex.codecogs.com/png.latex?%5Ctheta">:</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Balign*%7D%0A%5Cmathbb%7BE%7D%5BX%5D%20&amp;=%20%5Cfrac%7B1%7D%7B%20%5Ctheta%7D%20%5C%5C%0A%5Ctheta%5Cmathbb%7BE%7D%5BX%5D%20&amp;=%201%20%5C%5C%0A%5Ctheta%20&amp;=%20%5Cfrac%7B1%7D%7B%5Cmathbb%7BE%7D%5BX%5D%7D.%0A%5Cend%7Balign*%7D"></p>
<p>Now that we have isolated <img src="https://latex.codecogs.com/png.latex?%5Ctheta">, we can start guessing at some estimators. Let’s replace <img src="https://latex.codecogs.com/png.latex?%5Cmathbb%7BE%7D%5BX%5D"> with our sample mean (the average of whatever data we end up with). Like we did before, let’s call it <img src="https://latex.codecogs.com/png.latex?%5Coverline%7BX%7D">. Then our first estimator will be <img src="https://latex.codecogs.com/png.latex?%0A%5Chat%7B%5Ctheta%7D_1%20=%20%5Cfrac%7B1%7D%7B%5Coverline%7BX%7D%7D%0A"></p>
<p>Let’s see if our new estimator is <strong>unbiased</strong>. That is, if it has zero bias.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Definition
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Jensen’s inequality</strong>: Let <img src="https://latex.codecogs.com/png.latex?g(%5Ccdot)"> be a convex function (i.e., it has a positive second derivative). In that case, <img src="https://latex.codecogs.com/png.latex?%0A%5Cmathbb%7BE%7D%5Bg(X)%5D%20%5Cge%20g(%5Cmathbb%7BE%7D%5BX%5D)%0A"> with equality if <img src="https://latex.codecogs.com/png.latex?g"> is linear.</p>
</div>
</div>
<p>In our case, <img src="https://latex.codecogs.com/png.latex?g(X)%20=%20%5Chat%7B%5Ctheta%7D_1">. Therefore, Jensen’s inequality tells us that</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cmathbb%7BE%7D%5Cleft%5B%5Cfrac%7B1%7D%7B%5Coverline%7BX%7D%7D%5Cright%5D%20%3E%20%5Cfrac%7B1%7D%7B%5Cmathbb%7BE%7D%5BX%5D%7D.%0A"></p>
<p>We noted earlier that the expected value of the exponential distribution that we are working with is <img src="https://latex.codecogs.com/png.latex?1/%5Ctheta">. Then,</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Balign*%7D%0A%5Cmathbb%7BE%7D%5Cleft%5B%5Cfrac%7B1%7D%7B%5Coverline%7BX%7D%7D%5Cright%5D%0A&amp;%3E%20%5Cfrac%7B1%7D%7B%5Cmathbb%7BE%7D%5BX%5D%7D%20%5C%5C%0A&amp;%3E%20%5Cfrac%7B1%7D%7B%5Cfrac%7B1%7D%7B%5Ctheta%7D%7D%20%5C%5C%0A&amp;%3E%20%5Ctheta%20%5C%5C%0A%5Cmathbb%7BE%7D%5B%5Chat%7B%5Ctheta%7D_1%5D%20&amp;%3E%20%5Ctheta.%0A%5Cend%7Balign*%7D"></p>
<p>Since the expected value of our estimator is not <img src="https://latex.codecogs.com/png.latex?%5Ctheta">, we have some non-zero bias. So, we know that our estimator is biased! Thanks for help <a href="https://en.wikipedia.org/wiki/Johan_Jensen_(mathematician)">Jensen</a>.</p>
<p>Instead of finding whether or not there <em>is</em> bias, we may want to calculate the exact bias of our estimator. For this example, doing so becomes quite the exercise in calculus and involves factoring constants out of integrals until those integrals evaluate to 1 (because we turn them into PDFs). Then we can safely get rid of them. But the math is such that it may be worth doing in a separate, smaller article. So for now, Jensen has at least showed us that our estimator is biased, and we will call that a win!</p>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>And just like that, we’ve added a new tool to our belt: Jensen’s inequality. If you find yourself with questions or want some more guidance, feel free to reach out to me on my <a href="https://discord.gg/vF6W2bdKFH">Discord</a> server! If enough demand for calculating the bias in this example appears, I will draft a separate article with all of the integral math done step-by-step. And, of course, if you want to financially support this project, you can <a href="https://buymeacoffee.com/mitchellharrison">buy me a coffee</a>.</p>
<p>Thanks for reading, and I’ll see you in the next one!</p>


</section>

 ]]></description>
  <category>Statistics</category>
  <category>Mathematical Statistics</category>
  <guid>https://mitchellharrison.github.io/tutorials/math_stat_3.html</guid>
  <pubDate>Tue, 25 Mar 2025 18:57:49 GMT</pubDate>
  <media:content url="https://mitchellharrison.github.io/images/thumbnails/mathematical_statistics/3.png" medium="image" type="image/png" height="108" width="144"/>
</item>
<item>
  <title>Our World in Emissions | TidyTutorial</title>
  <dc:creator>Mitch Harrison</dc:creator>
  <link>https://mitchellharrison.github.io/tutorials/tidytuesday_05212024.html</link>
  <description><![CDATA[ 




<p>Welcome! If you saw my post for this week’s TidyTuesday, I’m glad you liked it enough to learn from it! If not, you can either scroll to the bottom to see the final product or click <a href="../projects/tidytuesday_05212024/emissions.html">here</a>. For this plot, we will use an area plot to visualize the global emissions by type going back to 1900. To start, we will use a bare-bones <code>ggplot2</code> area chart with no bells or whistles to see what we are working with.</p>
<div class="cell">
<details class="code-fold">
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-2"></span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># read data and rename an ugly column ------------------------------------------</span></span>
<span id="cb1-4">emis<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(</span>
<span id="cb1-5">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/"</span>,</span>
<span id="cb1-6">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/2024/2024-05-21/emissions.csv"</span></span>
<span id="cb1-7">  )</span>
<span id="cb1-8">)</span>
<span id="cb1-9"></span>
<span id="cb1-10">emis <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> emis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rename</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emissions =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"total_emissions_MtCO2e"</span>)</span>
<span id="cb1-12"></span>
<span id="cb1-13">emis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, commodity) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emissions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(emissions), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-16">  </span>
<span id="cb1-17">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># start of plot --------------------------------------------------------------</span></span>
<span id="cb1-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> emissions, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> commodity)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_area</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_05212024_files/figure-html/step-one-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Okay, we’ve learned a lot. First, there are a <em>lot</em> of categories. A good rule of thumb is that once you get to about seven colors, even non-colorblind humans struggle to differentiate. But there is hope! Notice that there are several types of coal production. Let’s aggregate them. Second, there is a long tail on the left because of near-zero data. Let’s bring our limit to the right to get a better look.</p>
<div class="cell">
<details class="code-fold">
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">emis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># get rid of that tail</span></span>
<span id="cb2-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb2-4">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># aggregate coal</span></span>
<span id="cb2-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(commodity, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, commodity),</span>
<span id="cb2-6">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, commodity) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emissions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(emissions), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-9">  </span>
<span id="cb2-10">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># start of plot --------------------------------------------------------------</span></span>
<span id="cb2-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> emissions, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> commodity)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_area</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_05212024_files/figure-html/step-two-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Much better! But to me, having the smallest category (cement) on top feels awkward. Let’s reorder the categories! I’ll do so in descending order of emissions in the last year.</p>
<div class="cell">
<details class="code-fold">
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">LEVS <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oil &amp; NGL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Natural Gas"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cement"</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># our desired order</span></span>
<span id="cb3-2"></span>
<span id="cb3-3">emis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb3-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(commodity, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, commodity),</span>
<span id="cb3-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(commodity, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> LEVS) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># re-order </span></span>
<span id="cb3-8">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, commodity) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emissions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(emissions), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-11">  </span>
<span id="cb3-12">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># start of plot --------------------------------------------------------------</span></span>
<span id="cb3-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> emissions, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> commodity)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_area</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_05212024_files/figure-html/step-three-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Now we’re cooking! It’s time for some style points. I’ll use my favorite aesthetic cheat code: <a href="https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/"><code>ggthemes</code></a>. Let’s add a theme and color scheme. I’m going with the FiveThirtyEight theme and a colorblind-friendly palette. I’ll also take this opportunity to adjust the opacity down just a touch. This is a personal choice, but I find it nice to be able to see the grid behind such ink-heavy plots as area plots.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remember: unless you are making plots for a very small number of people and you know for certain that none are colorblind, <em>making inaccessible plots is</em> <em>inexcusable</em>. Of course, we all make mistakes, so if you ever notice an accessibility issue on my site, reach out and let me know on <a href="https://discord.gg/vF6W2bdKFH">Discord</a> or via a GitHub issue so I can improve for next time!</p>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">LEVS <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oil &amp; NGL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Natural Gas"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cement"</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># our desired order</span></span>
<span id="cb4-2"></span>
<span id="cb4-3">emis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb4-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(commodity, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, commodity),</span>
<span id="cb4-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(commodity, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> LEVS) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># re-order </span></span>
<span id="cb4-8">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, commodity) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emissions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(emissions), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-11">  </span>
<span id="cb4-12">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># start of plot --------------------------------------------------------------</span></span>
<span id="cb4-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> emissions, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> commodity)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_area</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># drop the opacity just a touch</span></span>
<span id="cb4-15"></span>
<span id="cb4-16">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add theme and colors (love you, ggthemes) </span></span>
<span id="cb4-17">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_colorblind</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-18">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_fivethirtyeight</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_05212024_files/figure-html/step-four-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>And just like that, it feels like we are almost there! Let’s change a few things at once. We will change the background color, add the title/subtitle/axis labels/caption, and format the <img src="https://latex.codecogs.com/png.latex?y">-axis to read <code>30k</code> instead of <code>30000</code>. That will give us a feel for the final color scheme and how the fonts feel on the page. Because of the subscript “2” in <img src="https://latex.codecogs.com/png.latex?CO_2">, I will use the <code>latex2exp</code> package use <img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> typesetting in the plot.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>One note that is unique to this plot. When we use <code>theme_fivethirtyeight</code>, it removes the <img src="https://latex.codecogs.com/png.latex?y">-axis title. So, although we normally wouldn’t have to explicitly set the axis title to <code>element_text</code> in the <code>theme</code> function, we will here.</p>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">LEVS <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oil &amp; NGL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Natural Gas"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cement"</span>)</span>
<span id="cb5-2">BG_COLOR <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#F0F0F0"</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># this will be our background color</span></span>
<span id="cb5-3"></span>
<span id="cb5-4">emis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb5-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(commodity, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, commodity),</span>
<span id="cb5-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(commodity, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> LEVS) </span>
<span id="cb5-9">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, commodity) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emissions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(emissions), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-12">  </span>
<span id="cb5-13">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># start of plot --------------------------------------------------------------</span></span>
<span id="cb5-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> emissions, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> commodity)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_area</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-16"></span>
<span id="cb5-17">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_colorblind</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-18">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_fivethirtyeight</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-19"></span>
<span id="cb5-20">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># abbreviate the y axis labels using the scales package</span></span>
<span id="cb5-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> scales<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">label_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scale =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e-3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">suffix =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"k"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-22"></span>
<span id="cb5-23">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add labels to the plot -----------------------------------------------------</span></span>
<span id="cb5-24">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb5-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb5-26">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Emissions ($MtCO_2e$)"</span>), <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># LaTeX typesetting with TeX()</span></span>
<span id="cb5-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Our World in Emissions"</span>,</span>
<span id="cb5-28">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(</span>
<span id="cb5-29">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb5-30">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Emissions are measured in Millions of Tons of $CO_2$ equivalent"</span>,</span>
<span id="cb5-31">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"($MtCO_2e$)"</span></span>
<span id="cb5-32">      )</span>
<span id="cb5-33">    ),</span>
<span id="cb5-34">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb5-35">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Made with love by Mitch Harrison"</span>,</span>
<span id="cb5-36">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># long blank line to "hack" a an annotation in the bottom-left corner</span></span>
<span id="cb5-37">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"                                                                       "</span>,</span>
<span id="cb5-38">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Source: Carbon Majors database and TidyTuesday"</span></span>
<span id="cb5-39">    )</span>
<span id="cb5-40">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-41">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb5-42">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb5-43">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> BG_COLOR) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># change background color</span></span>
<span id="cb5-44">  ) </span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_05212024_files/figure-html/step-five-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>You could submit this plot for public consumption without shame, but we can do better! For example, I think we could safely remove the legend by annotating the colors directly on the plot. Let’s use a <code>geom_text</code> to do just that. While this entire process has been creative, we are getting into highly subjective territory here. So if you don’t like these changes, do something else! I would love to see your ideas.</p>
<p>To make the annotations, I want the text to be right-justified and directly atop one another. To accomplish that, I will give <code>geom_text</code> a single <img src="https://latex.codecogs.com/png.latex?x"> value but several <img src="https://latex.codecogs.com/png.latex?y"> values (one for each category).</p>
<div class="cell">
<details class="code-fold">
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">LEVS <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oil &amp; NGL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Natural Gas"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cement"</span>)</span>
<span id="cb6-2">BG_COLOR <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#F0F0F0"</span></span>
<span id="cb6-3"></span>
<span id="cb6-4">emis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb6-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(commodity, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, commodity),</span>
<span id="cb6-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(commodity, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> LEVS) </span>
<span id="cb6-9">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, commodity) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emissions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(emissions), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-12">  </span>
<span id="cb6-13">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># start of plot --------------------------------------------------------------</span></span>
<span id="cb6-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> emissions, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> commodity)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_area</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-16"></span>
<span id="cb6-17">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_colorblind</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-18">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_fivethirtyeight</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> scales<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">label_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scale =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e-3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">suffix =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"k"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-20"></span>
<span id="cb6-21">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add annotation text to replace the legend ----------------------------------</span></span>
<span id="cb6-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">annotate</span>(</span>
<span id="cb6-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span id="cb6-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>,</span>
<span id="cb6-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span>,</span>
<span id="cb6-26">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4700</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">26000</span>),</span>
<span id="cb6-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cement"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Natural Gas"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oil &amp; NGL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>),</span>
<span id="cb6-28">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span>,</span>
<span id="cb6-29">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fontface =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span></span>
<span id="cb6-30">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-31"></span>
<span id="cb6-32">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb6-33">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb6-34">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Emissions ($MtCO_2e$)"</span>),</span>
<span id="cb6-35">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Our World in Emissions"</span>,</span>
<span id="cb6-36">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(</span>
<span id="cb6-37">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb6-38">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Emissions are measured in Millions of Tons of $CO_2$ equivalent"</span>,</span>
<span id="cb6-39">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"($MtCO_2e$)"</span></span>
<span id="cb6-40">      )</span>
<span id="cb6-41">    ),</span>
<span id="cb6-42">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb6-43">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Made with love by Mitch Harrison"</span>,</span>
<span id="cb6-44">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"                                                                       "</span>,</span>
<span id="cb6-45">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Source: Carbon Majors database and TidyTuesday"</span></span>
<span id="cb6-46">    )</span>
<span id="cb6-47">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-48"></span>
<span id="cb6-49">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb6-50">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># hide the legend</span></span>
<span id="cb6-51">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb6-52">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> BG_COLOR)</span>
<span id="cb6-53">  ) </span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_05212024_files/figure-html/step-six-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Nailed it. Now, I will happily take criticism here. I don’t love that the “Cement” label isn’t entirely encompassed by its data. But I think it’s much cleaner than having a legend drawing our eye away from the plot, so I’ll keep it.</p>
<p>The last thing we have to do before we can worry about the big annotation in the middle of the plot is change where the axes break. That is, set the years and emission amount displayed on the x and y axes, respectively. And while I’m at it, I will use a <code>geom_hline</code> to make the <img src="https://latex.codecogs.com/png.latex?x">-axis a bit bolder since it melts into the background a little bit too much for my liking.</p>
<div class="cell">
<details class="code-fold">
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">LEVS <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oil &amp; NGL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Natural Gas"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cement"</span>)</span>
<span id="cb7-2">BG_COLOR <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#F0F0F0"</span></span>
<span id="cb7-3">GRAY <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray35"</span></span>
<span id="cb7-4"></span>
<span id="cb7-5">emis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb7-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(commodity, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, commodity),</span>
<span id="cb7-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(commodity, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> LEVS) </span>
<span id="cb7-10">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, commodity) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emissions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(emissions), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-13">  </span>
<span id="cb7-14">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># start of plot --------------------------------------------------------------</span></span>
<span id="cb7-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> emissions, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> commodity)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_area</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-17"></span>
<span id="cb7-18">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_colorblind</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-19">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_fivethirtyeight</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-20"></span>
<span id="cb7-21">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># change where the axis breaks occur -----------------------------------------</span></span>
<span id="cb7-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(</span>
<span id="cb7-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5000</span>), </span>
<span id="cb7-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> scales<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">label_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scale =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e-3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">suffix =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"k"</span>)</span>
<span id="cb7-26">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-27"></span>
<span id="cb7-28">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">annotate</span>(</span>
<span id="cb7-29">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span id="cb7-30">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>,</span>
<span id="cb7-31">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span>,</span>
<span id="cb7-32">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4700</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">26000</span>),</span>
<span id="cb7-33">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cement"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Natural Gas"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oil &amp; NGL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>),</span>
<span id="cb7-34">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span>,</span>
<span id="cb7-35">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fontface =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span></span>
<span id="cb7-36">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-37"></span>
<span id="cb7-38">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb7-39">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb7-40">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Emissions ($MtCO_2e$)"</span>),</span>
<span id="cb7-41">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Our World in Emissions"</span>,</span>
<span id="cb7-42">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(</span>
<span id="cb7-43">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb7-44">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Emissions are measured in Millions of Tons of $CO_2$ equivalent"</span>,</span>
<span id="cb7-45">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"($MtCO_2e$)"</span></span>
<span id="cb7-46">      )</span>
<span id="cb7-47">    ),</span>
<span id="cb7-48">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb7-49">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Made with love by Mitch Harrison"</span>,</span>
<span id="cb7-50">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"                                                                       "</span>,</span>
<span id="cb7-51">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Source: Carbon Majors database and TidyTuesday"</span></span>
<span id="cb7-52">    )</span>
<span id="cb7-53">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-54"></span>
<span id="cb7-55">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> GRAY) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># bold axis</span></span>
<span id="cb7-56">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb7-57">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># hide the legend</span></span>
<span id="cb7-58">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb7-59">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> BG_COLOR)</span>
<span id="cb7-60">  ) </span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_05212024_files/figure-html/step-seven-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Once I write-in the line breaks, I’ll use the <code>annotate</code> function as before. But that’s not all. By default, there is no background with text annotations, so the grid overlaps the text and decreases legibility. To fix this, I’ll use <code>annotate</code> to put a rectangle the same color as the plot background behind the text, which “removes” the grid lines behind the text.</p>
<p>Finally, to accomplish the arrow, we will use our final <code>annotate</code> to draw a line segment and put an arrowhead at the end.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Normally, the order that we put things in a <code>ggplot2</code> pipeline doesn’t matter. But here, if you put the background rectangle after the text annotation, it will cover the text, rendering it invisible.</p>
</div>
</div>
<p>Because this is our last edit, I will take this opportunity to make one very oft-forgotten change: write my alt text. Since you’re here, I know you respect the power of data communication. Alt text lets us communicate with those who sometimes miss out on learning from plots online. As our color palette did for colorblind viewers, we owe it to our non-sighted friends to let them participate.</p>
<p>And finally, I’ll change the aspect ratio of the plot. You may have heard of the <a href="https://en.wikipedia.org/wiki/Golden_ratio">golden ratio</a>, which is a ratio that many humans find inherently satisfying to look at. That ratio is approximately 1.618:1. The inverse of that number is 0.618, which will be our horizontal aspect ratio (1.618 is vertical). Because the quarto headers won’t render with the document, my final header is below:</p>
<pre><code>#| label: plt-final
#| fig-width: 8
#| fig-align: "center"
#| fig-asp: 0.618
#| fig-alt: |
#|   This plot is titled Our World in Emissions. It is an area plot that shows
#|   global emissions over time by type. The types are coal, natural gas,
#|   cement, and oil and NGL. The plot notes that in 1995, the UN first met to
#|   discuss the climate threat. The plot shows near-zero emissions from 1900 to
#|   1920, when a slow increase begins. From there, emission growth seems to be
#|   exponentially increasing, with no decline since the UN first met. Coal is
#|   the largest emitter, then oil and NGL, then natural gas, and finally,
#|   cement.</code></pre>
<p>Now, let’s see the plot!</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># constants for ease of code legibility ----------------------------------------</span></span>
<span id="cb9-2">LEVS <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oil &amp; NGL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Natural Gas"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cement"</span>)</span>
<span id="cb9-3">BG_COLOR <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#F0F0F0"</span></span>
<span id="cb9-4">UN_TEXT <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb9-5">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"In 1995, the United Nations</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Conference of the Parties met for</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">the first"</span>, </span>
<span id="cb9-6">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"time to discuss the looming</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">threat of climate change. The COP</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">has"</span>,</span>
<span id="cb9-7">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"met twenty-eight times since."</span></span>
<span id="cb9-8">)</span>
<span id="cb9-9"></span>
<span id="cb9-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># data cleanup -----------------------------------------------------------------</span></span>
<span id="cb9-11">emis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb9-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># lots of near-zero space without this filter</span></span>
<span id="cb9-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb9-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(commodity, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>, commodity),</span>
<span id="cb9-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">commodity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(commodity, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> LEVS) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># re-order areas</span></span>
<span id="cb9-16">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb9-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, commodity) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb9-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emissions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(emissions), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb9-19">  </span>
<span id="cb9-20">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># start of plot --------------------------------------------------------------</span></span>
<span id="cb9-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> emissions, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> commodity)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_area</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-23">  </span>
<span id="cb9-24">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># UN COP annotation text box -------------------------------------------------</span></span>
<span id="cb9-25"></span>
<span id="cb9-26">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># the arrow</span></span>
<span id="cb9-27">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">annotate</span>(</span>
<span id="cb9-28">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"segment"</span>,</span>
<span id="cb9-29">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1995</span>,</span>
<span id="cb9-30">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xend =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1995</span>,</span>
<span id="cb9-31">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">35500</span>,</span>
<span id="cb9-32">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yend =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20500</span>,</span>
<span id="cb9-33">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"solid"</span>,</span>
<span id="cb9-34">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linejoin =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"round"</span>,</span>
<span id="cb9-35">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb9-36">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"grey35"</span>,</span>
<span id="cb9-37">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">arrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrow</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"closed"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unit</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cm"</span>))</span>
<span id="cb9-38">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-39"></span>
<span id="cb9-40">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># the background rectangle (must be before the text)</span></span>
<span id="cb9-41">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">annotate</span>(</span>
<span id="cb9-42">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rect"</span>,</span>
<span id="cb9-43">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xmin =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1945.5</span>,</span>
<span id="cb9-44">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xmax =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1993.5</span>,</span>
<span id="cb9-45">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ymin =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">23500</span>,</span>
<span id="cb9-46">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ymax =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">35800</span>,</span>
<span id="cb9-47">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> BG_COLOR</span>
<span id="cb9-48">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-49"></span>
<span id="cb9-50">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># annotation text</span></span>
<span id="cb9-51">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">annotate</span>(</span>
<span id="cb9-52">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span id="cb9-53">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1992</span>,</span>
<span id="cb9-54">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30000</span>,</span>
<span id="cb9-55">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> UN_TEXT,</span>
<span id="cb9-56">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> GRAY,</span>
<span id="cb9-57">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fontface =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"italic"</span>,</span>
<span id="cb9-58">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span></span>
<span id="cb9-59">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-60">  </span>
<span id="cb9-61">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># replace legend with annotation text ----------------------------------------</span></span>
<span id="cb9-62">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">annotate</span>(</span>
<span id="cb9-63">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span id="cb9-64">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>,</span>
<span id="cb9-65">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span>,</span>
<span id="cb9-66">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4700</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">26000</span>),</span>
<span id="cb9-67">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cement"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Natural Gas"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oil &amp; NGL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coal"</span>),</span>
<span id="cb9-68">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span>,</span>
<span id="cb9-69">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fontface =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span></span>
<span id="cb9-70">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-71">  </span>
<span id="cb9-72">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># visual style elements (love you, ggthemes) ---------------------------------</span></span>
<span id="cb9-73">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_colorblind</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-74">  ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_fivethirtyeight</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-75">  </span>
<span id="cb9-76">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># customize axis breaks and labels -------------------------------------------</span></span>
<span id="cb9-77">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-78">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(</span>
<span id="cb9-79">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5000</span>), </span>
<span id="cb9-80">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> scales<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">label_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scale =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e-3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">suffix =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"k"</span>)</span>
<span id="cb9-81">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-82">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb9-83">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb9-84">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Emissions ($MtCO_2e$)"</span>),</span>
<span id="cb9-85">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Our World in Emissions"</span>,</span>
<span id="cb9-86">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> latex2exp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">TeX</span>(</span>
<span id="cb9-87">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb9-88">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Emissions are measured in Millions of Tons of $CO_2$ equivalent"</span>,</span>
<span id="cb9-89">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"($MtCO_2e$)"</span></span>
<span id="cb9-90">      )</span>
<span id="cb9-91">    ),</span>
<span id="cb9-92">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb9-93">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Made with love by Mitch Harrison"</span>,</span>
<span id="cb9-94">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"                                                                       "</span>,</span>
<span id="cb9-95">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Source: Carbon Majors database and TidyTuesday"</span></span>
<span id="cb9-96">    )</span>
<span id="cb9-97">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb9-98">  </span>
<span id="cb9-99">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># theme cleanup --------------------------------------------------------------</span></span>
<span id="cb9-100">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> GRAY) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># bold axis</span></span>
<span id="cb9-101">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb9-102">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>, </span>
<span id="cb9-103">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb9-104">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> BG_COLOR)</span>
<span id="cb9-105">  ) </span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_05212024_files/figure-html/plt-final-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" alt="This plot is titled Our World in Emissions. It is an area plot that shows global emissions over time by type. The types are coal, natural gas, cement, and oil and NGL. The plot notes that in 1995, the UN first met to discuss the climate threat. The plot shows near-zero emissions from 1900 to 1920, when a slow increase begins. From there, emission growth seems to be exponentially increasing, with no decline since the UN first met. Coal is the largest emitter, then oil and NGL, then natural gas, and finally, cement." width="768"></p>
</figure>
</div>
</div>
</div>
<p>No plot is perfect, but I am happy with what we have accomplished, and I hope you are too! If you have any questions or corrections, feel free to reach out on <a href="https://discord.gg/vF6W2bdKFH">Discord</a>, and I’ll be happy to help. And, of course, if you want to contribute to this effort financially, you are more than welcome to <a href="https://buymeacoffee.com/mitchellharrison">buy me a coffee</a>.</p>
<p>Thanks for sticking around, and good luck with your TidyTuesday adventures!</p>



 ]]></description>
  <category>Data Viz</category>
  <guid>https://mitchellharrison.github.io/tutorials/tidytuesday_05212024.html</guid>
  <pubDate>Tue, 25 Mar 2025 18:57:49 GMT</pubDate>
  <media:content url="https://mitchellharrison.github.io/images/thumbnails/projects/tidytuesday/05212024.png" medium="image" type="image/png" height="108" width="144"/>
</item>
<item>
  <title>Campus Pride Index | TidyTutorial</title>
  <dc:creator>Mitch Harrison</dc:creator>
  <link>https://mitchellharrison.github.io/tutorials/tidytuesday_06112024.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>In celebration of Pride Month, this week’s <a href="https://github.com/rfordatascience/tidytuesday/tree/master/data/2024/2024-06-11">TidyTuesday</a> provides data from the <a href="https://www.campusprideindex.org">Campus Pride Index</a>, which measures the safety and inclusivity of LGBTQ+ programs across universities in the United States.</p>
<p>Each university is binned into one or more categories (e.g., military colleges, private/public, and others). What feels natural to me is to see how the Campus Pride Index compares across some of these categories. A proportionate stacked bar chart (where each bar has height equal to 1) is one option, but I would also like to see which types of universities are most common. If there are some categories with worse scores but with much smaller sample sizes, that would be helpful to know. So we’ll use a stacked bar, but not normalize the bar so we can also see how common each type is. Also bear in mind that a single university can (and often does) fall into multiple categories.</p>
<p>Let’s set some global settings so I don’t have to worry about aspect ratio or other trivialities while we work.</p>
<div class="cell">
<details class="code-fold">
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>opts_chunk<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set</span>(</span>
<span id="cb1-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fig.width =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>,        </span>
<span id="cb1-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fig.asp =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.618</span>,      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># the golden ratio</span></span>
<span id="cb1-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fig.align =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"center"</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># center align figures</span></span>
<span id="cb1-5">)</span></code></pre></div>
</details>
</div>
</section>
<section id="data-wrangling" class="level1">
<h1>Data Wrangling</h1>
<p>Time to load the data.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(gglgbtq)</span>
<span id="cb2-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggchicklet)</span>
<span id="cb2-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggthemes)</span>
<span id="cb2-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(DT)</span>
<span id="cb2-6"></span>
<span id="cb2-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># load the data ----------------------------------------------------------------</span></span>
<span id="cb2-8"></span>
<span id="cb2-9">pride_schools <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(</span>
<span id="cb2-10">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/"</span>,</span>
<span id="cb2-11">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2024/2024-06-11/pride_index.csv"</span></span>
<span id="cb2-12">))</span>
<span id="cb2-13"></span>
<span id="cb2-14">pride_tags <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(</span>
<span id="cb2-15">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/"</span>,</span>
<span id="cb2-16">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2024/2024-06-11/pride_index_tags.csv"</span></span>
<span id="cb2-17">))</span>
<span id="cb2-18"></span>
<span id="cb2-19"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">datatable</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(pride_schools, pride_tags))</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-4d2597d8f41336ee078d" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4d2597d8f41336ee078d">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238"],["University of Maryland, College Park","University of Michigan-Dearborn","SUNY Westchester Community College","University at Buffalo","Slippery Rock University","Emory University","Washington State University","Davidson College","Virginia Commonwealth University","Northern Arizona University","California State University, Long Beach or Long Beach State","University of La Verne","Rutgers, The State University of New Jersey-New Brunswick","Gettysburg College","Northern Illinois University","Trinity College","Augsburg University","Ithaca College","Portland State University","Northwestern University","University of Colorado at Boulder","Northeastern Illinois University","Elon University","Bridgewater State University","New Mexico State University","University of Richmond","Tufts University","University of Nebraska at Omaha","Youngstown State University","University of Massachusetts, Amherst","West Virginia University","Virginia State University","Kansas State University","Bentley University","Knox College","Oakland University","Union College","Montana State University-Bozeman","Syracuse University","California State University, Northridge","SUNY Oneonta","Montclair State University","University of New Haven","University of Wisconsin","Lehigh University","George Mason University","University of Houston","William &amp; Mary","College of Staten Island/CUNY","Virginia Tech","Washington University in St. Louis","Eastern Michigan University","University of Vermont","MIT","University of Minnesota, Morris","Kalamazoo College","Pace University","University of Maryland, Baltimore County","The University of Alabama","Michigan State University","The Evergreen State College","Napa Valley College","University of Tennessee","University of Missouri-Kansas City","Clark University","Roger Williams University","University of Colorado at Colorado Springs","The Pennsylvania State University","Emporia State University","Indiana University, Bloomington","Lawrence University","Macalester College","University of Missouri - St. Louis","San Diego State University","Appalachian State University","University of Wisconsin - Superior","Centre College","University of Wisconsin - Eau Claire","Rhodes College","California State University, Chico","Hofstra University","University of Rochester","University California, Irvine","Washington College","Illinois State University","University of Miami","University of Kentucky","University of Wisconsin - Oshkosh","Oregon State University","North Dakota State University","University at Albany - SUNY","Michigan Technological University","Colby College","Northern Kentucky University","Eckerd College","Guilford College","University of North Dakota","University of Wisconsin - Green Bay","Georgia College &amp; State University","University of Pittsburgh at Bradford","University of Kansas","Baldwin Wallace University","Rochester Institute of Technology","University of Maine at Machias","University of Wisconsin - Whitewater","San Francisco State University","Swarthmore College","University of Texas at Dallas","Red Rocks Community College","Colgate University","Bard College at Simon's Rock","Kent State University","Purdue University","Kenyon College","Widener University","College of Wooster","University of Wisconsin - Milwaukee","University of Maine at Farmington","St. John's College, Annapolis","Drexel University","Southern Methodist University","Earlham College","Southern Illinois University Carbondale","University of Louisville","Wichita State University","SUNY ROCKLAND COMMUNITY COLLEGE","Adelphi University","Hobart and William Smith Colleges","University of Illinois Chicago","Metropolitan State University of Denver","Montserrat College of Art","Harvard College","Cleveland State University","University of Mount Union","University of Virginia","Gonzaga University","James Madison University","University of the Arts","Stevens Institute of Technology","Towson University","Florida International University","Antioch College","Millersville University of Pennsylvania","Mars Hill University","Kean University","The University of Findlay","Fort Lewis College","Southwestern University","Lebanon Valley College","University of New Hampshire-Main Campus","Mohawk Valley Community College","Bryant University","Emerson College","Manhattan School of Music","Eastern Mennonite University","Tidewater Community College","Art Academy of Cincinnati","Joliet Junior College","University of Mary Washington","Gwynedd Mercy University","Colorado College","University of Puget Sound","Virginia Wesleyan University","Fitchburg State University","Juniata College","University of Michigan-Ann Arbor","Worcester State University","Regis College","West Chester University of Pennsylvania","William Paterson University of New Jersey","Gallaudet University","Whitman College","University of Wisconsin-Stevens Point","Georgia Southern University","Susquehanna University","Dominican University of California","Texas State University","Skyline College","Salt Lake Community College","Catawba College","Nazareth College","Rhode Island College","Big Sandy Community and Technical College","Dutchess Community College","California State Polytechnic University-Pomona","Diablo Valley College","Point Park University","Bergen Community College","Miami University-Oxford","Butte College","Wheaton College","University of Oklahoma-Norman Campus","Norco College","Milwaukee Institute of Art &amp; Design","Allegheny College","Ramapo College of New Jersey","Drew University","Dakota State University","Randolph College","Otis College of Art and Design","Dickinson College","University of Northern Colorado","University of North Carolina at Charlotte","University of Nebraska at Kearney","California State University-Bakersfield","Suffolk University","Wayne State University","Western Colorado University","Wentworth Institute of Technology","Sacred Heart University","Henry Ford Community College","Xavier University","Haverford College","The College of Idaho","University of Central Arkansas","Camden County College","Western Kentucky University","University of Pittsburgh-Main Campus","Binghamton University SUNY","Stockton University","Kutztown University","East Carolina University","Southern New Hampshire University","Cuyahoga Community College Metro Campus","Cuyahoga Community College Western Campus","Cuyahoga Community College Eastern Campus","Cuyahoga Community College Westshore Campus","Ferris State University","University of Toledo","Bates College","Missouri Science &amp; Technology","Forsyth Technical Community College","Woodbury University","University of Texas Arlington","University of Arkansas at Little Rock","Linfield University","Bluegrass Community &amp; Technical College (BCTC)","Hartwick College"],["College Park, MD","Dearborn, MI","Valhalla, NY","Buffalo, NY","Slippery Rock, PA","Atlanta, GA","Pullman, WA","Davidson, NC","Richmond, VA","Flagstaff, AZ","Long Beach, CA","La Verne, CA","New Brunswick, NJ","Gettysburg, PA","DeKalb, IL","Hartford, CT","Minneapolis, MN","Ithaca, NY","Portland, OR","Evanston, IL","Boulder, CO","Chicago, IL","Elon, NC","Bridgewater, MA","Las Cruces, NM","Richmond, VA","Medford, MA","Omaha, NE","youngstown, OH","Amherst, MA","Morgantown, WV","Virginia State University, VA","Manhattan, KS","Waltham, MA","Galesburg, IL","Rochester, MI","Schenectady, NY","Bozeman, MT","Syracuse, NY","Northridge, CA","Oneonta, NY, NY","Montclair, NJ","West Haven, CT","Madison, WI","Bethlehem, PA","Fairfax, VA","Houston, TX","Williamsburg, VA","Staten Island, NY","Blacksburg, VA","St. Louis, MO","Ypsilanti, MI","Burlington, VT","Cambridge, MA","Morris, MN","Kalamazoo, MI","New York, NY","Baltimore, MD","Tuscaloosa, AL","East Lansing, MI","Olympia, WA","Napa, CA","KNoxville, TN","Kansas City, MO","Worcester, MA","Bristol, RI","Colorado Springs, CO","University Park, PA","Emporia, KS","Bloomington, IN","Appleton, WI","Saint Paul, MN","Saint Louis, MO","San Diego, CA","Boone, NC","Superior, WI","Danville, KY","Eau Claire, WI","Memphis, TN","Chico, CA","Hempstead, NY","Rochester, NY","Irvine, CA","Chestertown, MD","Normal, IL","Coral Gables, FL","Lexington, KY","Oshkosh, WI","Corvallis, OR","Fargo, ND","Albany, NY","Houghton, MI","Waterville, ME","Highland Heights, KY","St. Petersburg, FL","Greensboro, NC","Grand Forks, ND","Green Bay, WI","Milledgeville, GA","Bradford, PA","Lawrence, KS","Berea, OH","Rochester, NY","Machias, ME","Whitewater, WI","San Francisco, CA","Swarrthmore, PA","Richardson, TX","Lakewood, CO","Hamilton, NY","Great Barrington, MA","Kent, OH","West Lafayette, IN","Gambier, OH","Chester, PA","Wooster, OH","Milwaukee, WI, WI","Farmington, ME","Annapolis, MD","Philadelphia, PA","DALLAS, TX","Richmond, IN","Carbondale, IL","Louisville, KY","Wichita, KS","SUFFERN, NY","Garden City, NY","Geneva, NY","Chicago, IL","Denver, CO","Beverly, MA","Cambridge, MA","Cleveland, OH","Alliance, OH","Charlottesville, VA","Spokane, WA","Harrisonburg, VA","Philadelphia, PA","Hoboken, NJ","Towson, MD","Miami, FL","Yellow Springs, OH","Millersville, PA","Mars Hill, NC","Union, NJ","Findlay, OH","Durango, CO","Georgetown, TX","Annville, PA","Durham, NH","Utica, NY","Smithfield, RI","Boston, MA","New York, NY","Harrisonburg, VA","Norfolk, VA","Cincinnati, OH","Joliet, IL","Fredericksburg, VA","Gwynedd Valley, PA","Colorado Springs, CO","Tacoma, WA","Virginia Beach, VA","FITCHBURG, MA","Huntingdon, PA","Ann Arbor, MI","Worcester, MA","Weston, MA","West Chester, PA","Wayne, NJ","Washington, DC","Walla Walla, WA","Stevens Point, WI","Statesboro, GA","Selinsgrove, PA","San Rafael, CA","San Marcos, TX","San Bruno, CA","Salt Lake City, UT","Salisbury, NC","Rochester, NY","Providence, RI","Prestonsburg, KY","Poughkeepsie, NY","Pomona, CA","Pleasant Hill, CA","Pittsburgh, PA","Paramus, NJ","Oxford, OH","Oroville, CA","Norton, MA","Norman, OK","Norco, CA","Milwaukee, WI","Meadville, PA","Mahwah, NJ","Madison, NJ","Madison, SD","Lynchburg, VA","Los Angeles, CA","Carlisle, PA","Greeley, CO","Charlotte, NC","Kearney, NE","Bakersfield, CA","Boston, MA","Detroit, MI","Gunnison, CO","Boston, MA","Fairfield, CT","Dearborn, MI","Cincinnati, OH","Haverford, PA","Caldwell, ID","Conway, AR","Blackwood, NJ","Bowling Green, KY","Pittsburgh, PA","Binghamton, NY","Galloway, NJ","Kutztown, PA","Greenville, NC","Manchester, NH","Cleveland, OH","Parma, OH","Highland Hills, OH","Westlake, OH","Big Rapids, MI","Toledo, OH","Lewiston, ME","Rolla, MO","Winston-Salem, NC","Burbank, CA","Arlington, TX","Little Rock, AR","McMinnville, OR","Lexington, KY","Oneonta, NY"],[5,3,4,3.5,4,4.5,5,4,4.5,4.5,4.5,2.5,5,4.5,5,5,5,5,5,4,5,2.5,5,4.5,4.5,4.5,5,4.5,3,5,4.5,4,5,4.5,4,5,5,4,4,4.5,4,5,4,4.5,5,5,4.5,4.5,3.5,4,5,4.5,5,4.5,4,4,5,3,4.5,4,3.5,4,4,4.5,4.5,4,4.5,5,4,5,4,5,4,5,4.5,3.5,3,5,4.5,4,5,5,3.5,3.5,4,4,5,4.5,4,3.5,5,3.5,3.5,5,3,5,4,5,3,3.5,4.5,4,4,4.5,4,3.5,4,5,3.5,4.5,4.5,5,5,4,4,4,4.5,4.5,3.5,3.5,4.5,4.5,5,5,4,3,5,4.5,5,4.5,4,4.5,4,3,4.5,4.5,4,3,4,5,4.5,4.5,3.5,3,3,3.5,4,3.5,4,4.5,2,2,4,3,3,1.5,2.5,2.5,4,3,2.5,4,5,4.5,3,5,4.5,3.5,4,4.5,3.5,3,4.5,3.5,3,3,3.5,3,4,2,4,2.5,2.5,3.5,3.5,1.5,3,4.5,4.5,3.5,4.5,4,3,4,4.5,4,4.5,2,3,4,4.5,5,3.5,5,3.5,3.5,4.5,3,4.5,4,2.5,3,3,2.5,2,2.5,4.5,5,4.5,4.5,4,4.5,3.5,3,3,3,3,3.5,4,3.5,3,4,3,5,2.5,3,4,3.5],[37952,9000,13000,29850,8500,14769,19446,1850,31500,29000,36846,8600,48000,2400,16234,2159,3537,6000,25000,21215,30000,10275,6500,10000,16765,3890,11926,15500,11171,28500,34000,3400,20000,4100,1300,17170,2150,16902,14422,36000,5514,21000,6500,43193,6950,39150,40000,8500,10185,31000,14000,10500,11000,11000,1900,1458,12835,14000,38000,50000,2100,5000,26000,16375,2300,4000,12017,46184,6100,49695,1500,2094,8381,32000,20436,2500,1450,11000,2000,16251,9533,10182,29000,1420,20000,16397,30000,14000,28000,14500,18000,7238,2299,16000,1950,1200,14172,9780,6800,1500,28000,3500,18897,800,12000,29905,1699,27642,4297,3228,400,28000,49000,1730,6300,2000,23829,1800,450,14000,12373,1200,14000,22000,15000,7500,7859,2396,30539,21000,370,6500,16000,2100,22000,7450,22000,1900,6825,16517,34000,125,7500,1000,11610,3500,3443,1500,1651,13000,5000,3287,3783,1035,1000,7028,260,10000,4000,1724,2300,2200,1750,3500,1600,46000,4039,3014,17552,8000,1454,1493,8900,21000,2300,1531,38000,5599,16158,1200,3000,5776,1193,6500,23717,7854,4000,14585,24000,4816,1700,25829,10000,900,1800,5041,2100,3100,650,1100,2400,11114,22968,6232,7000,7288,26251,3040,5000,10216,13000,6738,1400,987,12000,6425,13228,25069,18000,9080,8000,29131,3400,3094,7000,3394,2183,10222,23000,1800,9000,2890,1132,47000,6712,1750,14500,1100],["large urban city","medium city","very small town","medium city","rural community","large urban city","small town","small town","medium city","small city","medium city","small city","large urban city","very small town","small city","medium city","large urban city","small city","large urban city","small city","small city","large urban city","small town","small city","medium city","medium city","small city","large urban city","medium city","small town","small city","small town","small city","small city","small city","small city","small city","small city","medium city","large urban city","small town","small city","small city","medium city","small city","small city","large urban city","small town","large urban city","small city","medium city","small city","small city","medium city","very small town","medium city","large urban city","large urban city","small city","small city","small city","small city","medium city","large urban city","medium city","small town","medium city","small town","small city","small city","small city","large urban city","large urban city","large urban city","small town","small city","small town","small city","large urban city","medium city","medium city","medium city","medium city","very small town","small city","large urban city","medium city","small city","small city","medium city","medium city","rural community","small town","medium city","medium city","medium city","small city","medium city","small town","rural community","small city","small town","medium city","rural community","small town","large urban city","large urban city","medium city","medium city","rural community","very small town","small city","small city","rural community","small city","small city","large urban city","very small town","small city","large urban city","large urban city","small city","small city","large urban city","large urban city","small town","small town","rural community","large urban city","large urban city","small city","medium city","medium city","small town","small town","medium city","small city","large urban city","small city","large urban city","large urban city","rural community","small city","rural community","small city","small city","small town","small city","rural community","small town","small city","small town","large urban city","large urban city","small city","large urban city","medium city","small city","small city","small town","large urban city","medium city","large urban city","small city","very small town","medium city","medium city","rural community","small town","small city","large urban city","small city","small city","small town","very small town","small city","small city","small city","large urban city","rural community","small town","medium city","rural community","medium city","medium city","small city","medium city","large urban city","small town","small town","small town","medium city","small town","large urban city","small town","small city","small town","very small town","rural community","large urban city","small town","medium city","large urban city","small city","medium city","large urban city","large urban city","very small town","large urban city","small city","small city","medium city","small city","very small town","small city","rural community","small city","medium city","small city","small city","very small town","small city","medium city","medium city","small city","small town","small city","small town","medium city","small city","small town","medium city","medium city","medium city","medium city","small city","medium city","small town"],[true,true,true,true,true,null,true,null,true,true,true,null,true,null,true,null,null,null,true,null,true,true,null,true,true,null,null,true,true,null,true,true,true,null,null,true,null,true,null,true,true,true,null,true,null,true,true,true,true,true,null,true,true,null,true,null,null,true,true,true,true,null,true,true,null,null,true,null,true,true,null,null,true,true,true,true,null,true,null,true,null,null,null,null,true,null,true,true,true,true,true,true,null,true,null,null,true,true,true,null,true,null,null,true,true,true,null,true,null,null,null,true,true,null,null,null,true,true,null,null,null,null,true,true,true,null,null,null,true,true,null,null,true,null,true,null,true,null,null,true,null,null,true,null,true,null,true,null,null,true,true,null,null,null,null,null,null,null,true,null,null,null,null,true,null,true,true,null,true,true,null,null,true,true,null,null,null,true,null,null,null,true,null,null,true,null,null,null,true,null,null,true,null,null,null,true,null,true,null,null,null,true,true,true,true,null,true,true,null,null,null,null,null,null,true,null,true,null,null,true,true,true,null,null,null,null,null,true,true,null,true,null,null,true,true,null,null,null],[null,null,null,null,null,true,null,true,null,null,null,true,null,true,null,true,true,true,null,true,null,null,true,null,null,true,true,null,null,null,null,null,null,true,true,null,true,null,true,null,null,null,true,null,true,null,null,null,null,null,true,null,null,true,null,true,true,null,null,null,null,null,null,null,true,true,null,null,null,null,true,true,null,null,null,null,true,null,true,null,null,true,null,null,null,true,null,null,null,null,null,null,null,null,true,true,null,null,null,null,null,true,true,null,null,null,null,null,null,true,true,null,null,true,true,true,null,null,true,true,true,true,null,null,null,null,true,true,null,null,true,true,null,true,null,true,null,true,true,null,null,true,null,true,null,true,null,true,true,null,null,true,true,true,true,null,true,null,null,true,true,true,true,null,true,null,null,true,null,null,true,true,null,null,true,true,null,null,null,true,true,null,null,null,null,null,true,null,null,null,true,null,null,true,true,null,true,null,null,true,true,null,null,null,null,true,null,null,true,true,null,true,true,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,true,null,null,true,null,true],[true,true,null,true,true,true,true,null,true,true,true,true,true,null,true,null,true,null,true,true,true,null,null,null,true,null,true,true,null,true,true,true,true,true,null,true,null,true,true,true,null,true,null,true,true,true,true,true,true,true,true,true,true,true,null,null,true,true,true,true,null,null,true,true,true,null,true,true,true,true,null,null,true,true,null,null,null,true,null,null,true,true,true,null,true,true,true,null,true,true,true,true,null,null,null,null,true,true,null,null,true,null,true,null,null,null,null,true,null,null,null,true,true,null,true,null,true,null,null,true,true,null,true,true,null,null,null,null,true,null,null,null,true,null,true,null,true,null,true,true,true,null,null,null,true,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,true,true,null,true,null,null,true,null,null,true,null,null,null,true,null,null,null,null,null,true,null,true,null,null,true,null,null,null,null,null,true,null,null,null,true,true,true,null,true,true,null,null,true,null,true,null,null,true,null,true,true,true,true,true,true,null,null,null,null,null,null,true,null,true,null,null,true,true,null,null,null],[null,true,null,true,true,null,null,null,true,true,true,true,true,null,true,true,true,true,null,null,true,true,true,true,true,true,null,true,true,null,true,true,true,true,null,true,null,true,true,true,null,true,true,true,true,null,true,null,true,true,true,true,true,true,null,null,true,true,true,null,true,null,null,null,true,true,true,null,true,null,null,null,true,true,true,null,null,true,null,true,null,true,true,null,true,true,true,true,true,null,null,true,null,true,null,true,true,true,true,null,null,null,true,null,true,true,null,true,null,null,null,true,true,null,null,null,true,null,null,true,null,true,true,true,null,null,null,null,true,true,null,null,true,true,null,true,true,true,true,true,null,null,true,null,true,true,null,null,true,true,null,true,true,null,true,null,true,null,null,null,null,null,true,true,null,true,true,true,null,true,true,null,true,null,null,true,null,null,null,null,true,true,null,null,true,null,true,null,null,null,null,true,null,null,null,true,null,true,null,null,null,true,true,true,true,true,true,true,true,true,null,true,null,null,true,null,null,null,null,true,true,null,null,null,null,null,null,true,true,null,true,null,true,true,true,null,null,null],[null,true,null,true,true,null,null,true,true,true,true,true,true,true,true,true,true,true,null,null,true,true,true,true,true,true,null,true,null,null,true,true,true,true,null,true,true,true,true,true,null,true,null,true,true,null,true,null,true,true,true,true,true,true,true,null,true,true,true,null,true,null,null,null,true,true,true,null,true,null,true,true,true,true,null,true,true,true,true,true,null,true,true,null,true,true,true,true,true,null,null,true,null,true,null,true,true,true,true,true,null,null,true,true,true,true,null,true,null,true,true,true,true,true,null,true,true,true,null,true,null,true,true,true,null,null,null,true,true,true,true,null,true,true,null,true,null,null,true,true,null,true,true,null,true,true,null,true,true,true,null,true,true,null,true,null,true,null,null,null,true,null,true,true,true,true,true,true,null,true,true,true,true,null,true,null,null,null,null,true,true,true,null,null,null,null,true,null,null,null,true,true,null,true,true,true,null,true,null,null,true,true,true,true,true,true,true,true,true,true,null,true,null,null,true,null,null,null,null,true,true,null,true,null,null,null,null,null,true,true,true,null,true,true,true,null,null,true],[null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,true,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,true,null,null,null,true,true,null,true,null,true,null,true,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,true,null,null,null,null,null,null,null,true,true,true,true,null,null,null,null,true,null,null,null,null,true,null],[true,null,null,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,null,true,true,true,true,true,true,true,null,true,true,true,true,true,true,true,null,true,true,null,true,true,null,true,true,true,true,true,true,true,null,true,true,true,true,true,true,null,true,true,null,true,null,true,true,true,null,null,true,true,true,null,true,null,null,true,true,true,true,null,true,true,null,true,true,true,null,true,true,null,null,null,true,true,true,true,true,true,null,true,null,true,true,true,true,null,true,null,true,true,true,true,true,true,true,null,true,true,true,true,null,true,true,null,null,null,true,true,null,true,true,null,true,true,true,null,true,true,true,null,true,null,true,true,true,null,true,true,true,null,true,true,null,true,null,null,null,null,null,true,null,true,true,true,true,true,true,true,true,true,true,true,true,true,null,null,null,null,true,true,true,null,null,null,null,true,null,true,null,true,true,null,true,true,true,null,true,null,true,true,true,true,true,true,true,true,true,true,true,null,true,true,null,true,null,true,null,null,true,true,true,true,null,null,null,null,true,null,true,true,null,true,true,true,true,null,true],[null,true,true,null,null,null,null,null,null,true,true,null,null,null,null,null,null,null,true,null,null,true,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,true,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,true,null,null,null,null,null,null,true,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,true,true,null,null,null,true,null,null,null,null,true,null,null,null,true,null,null,null,true,true,true,true,null,null,null,true,null,null,null,true,null,null,null],[null,null,null,null,true,true,null,true,null,null,null,null,null,true,null,true,true,true,null,null,null,null,true,true,null,true,null,null,null,null,null,null,null,null,true,null,true,null,null,null,null,true,null,null,null,null,null,true,true,null,null,null,null,null,true,true,true,true,null,null,true,null,null,null,true,true,null,null,null,null,true,true,null,null,null,null,true,true,true,null,null,null,null,true,null,null,null,null,null,null,null,null,true,null,true,true,null,true,true,null,null,null,true,true,null,null,true,null,null,true,true,null,null,true,null,true,null,true,true,null,null,true,null,null,null,null,null,true,null,null,true,true,null,null,null,null,null,null,null,null,null,true,null,true,null,true,true,true,true,null,null,null,true,null,true,null,null,null,true,null,null,true,true,true,true,null,null,null,null,null,true,true,true,null,true,true,null,null,null,true,true,true,null,null,null,null,true,null,null,null,true,true,null,null,true,true,true,null,true,null,true,null,null,null,null,null,null,true,null,null,true,null,true,true,null,null,null,null,null,true,true,null,null,null,null,null,null,null,null,true,null,null,true,null,true,true,null,true],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,true,null,null,null,null,null],[null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,true,null,null,null,null,null,null,null,null,null,null,null,true,null,true,null,null,null,null,null,null,null,true,null,null,null,true,true,null,null,null,null,null,true,null,null,null,null,true,null,null,true,null,true,null,null,true,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,true,null,null,null,null,null,null,true,true,true,null,null,null,null,null,null,true,null,null,true,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,true,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,true,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,true,null,null,null,null,null,null,null,null,null,null,true,null,null,null,true,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,true,true,null,null,null,true,null,null,true,null,null,null,null,true,null,null,null,null,null,true,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,true,null,null,null,null],[true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,true,null,null,null,null,null,null,null,null,null,null,true,null,null,true,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>campus_name<\/th>\n      <th>campus_location<\/th>\n      <th>rating<\/th>\n      <th>students<\/th>\n      <th>community_type<\/th>\n      <th>public<\/th>\n      <th>private<\/th>\n      <th>doctoral<\/th>\n      <th>masters<\/th>\n      <th>baccalaureate<\/th>\n      <th>community<\/th>\n      <th>residential<\/th>\n      <th>nonresidential<\/th>\n      <th>liberal_arts<\/th>\n      <th>technical<\/th>\n      <th>religious<\/th>\n      <th>military<\/th>\n      <th>hbcu<\/th>\n      <th>hispanic_serving<\/th>\n      <th>aapi_serving<\/th>\n      <th>other_minority_serving<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"campus_name","targets":1},{"name":"campus_location","targets":2},{"name":"rating","targets":3},{"name":"students","targets":4},{"name":"community_type","targets":5},{"name":"public","targets":6},{"name":"private","targets":7},{"name":"doctoral","targets":8},{"name":"masters","targets":9},{"name":"baccalaureate","targets":10},{"name":"community","targets":11},{"name":"residential","targets":12},{"name":"nonresidential","targets":13},{"name":"liberal_arts","targets":14},{"name":"technical","targets":15},{"name":"religious","targets":16},{"name":"military","targets":17},{"name":"hbcu","targets":18},{"name":"hispanic_serving","targets":19},{"name":"aapi_serving","targets":20},{"name":"other_minority_serving","targets":21}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>First, let’s format the data for ease of plotting. Right now, each category has its own column, with <code>TRUE</code> or <code>NA</code> values, where <code>NA</code> means “false” for our purposes. But we want the type of school to be represented in a single column so we can map that column to the color of the bars. To move multiple columns into a single one, we will <strong>pivot</strong> the data. Since we want to consolidate columns, we will need to make our data <em>longer</em> (i.e., add more rows), where each university now has multiple rows corresponding to <code>TRUE</code> or <code>FALSE</code>. Intuitively, to pivot the data longer, we use the <code>pivot_longer</code> function. Notice that once the pivot is complete, we only want to keep the rows where the value is <code>TRUE</code>, since the <code>FALSE</code> rows are just saying that “this university doesn’t fall into this type,” which is useless noise in our dataset.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># format data for plotting -----------------------------------------------------</span></span>
<span id="cb3-2"></span>
<span id="cb3-3">uni_types <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> pride_schools <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-4">  </span>
<span id="cb3-5">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># join both datasets into one</span></span>
<span id="cb3-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(pride_tags) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-7">  </span>
<span id="cb3-8">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># select which columns we want to analyze along with their ratings</span></span>
<span id="cb3-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(rating, public, private, community, liberal_arts, technical,</span>
<span id="cb3-10">         religious, military, hbcu, hispanic_serving, aapi_serving,</span>
<span id="cb3-11">         other_minority_serving) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb3-12">  </span>
<span id="cb3-13">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># replace NA with FALSE</span></span>
<span id="cb3-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">across</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">everything</span>(), <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">replace_na</span>(., <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-15">  </span>
<span id="cb3-16">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># do the pivot</span></span>
<span id="cb3-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cols =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>rating, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_to =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-18">  </span>
<span id="cb3-19">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># drop the rows that don't apply</span></span>
<span id="cb3-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(value <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-21">  </span>
<span id="cb3-22">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># clean up some strings for prettier plotting</span></span>
<span id="cb3-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb3-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(type, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>),</span>
<span id="cb3-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_to_title</span>(type),</span>
<span id="cb3-26">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace</span>(type, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Aapi"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AAPI"</span>)</span>
<span id="cb3-27">  )</span>
<span id="cb3-28"></span>
<span id="cb3-29"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">datatable</span>(uni_types)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-e9d576c151c9ca1d4609" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e9d576c151c9ca1d4609">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384"],[5,5,3,4,4,4,3.5,4,4,4.5,4.5,4.5,5,4,4,4.5,4.5,4.5,4.5,4.5,2.5,2.5,5,4.5,4.5,5,5,5,5,5,5,5,5,5,5,4,5,2.5,2.5,5,5,4.5,4.5,4.5,4.5,4.5,4.5,5,4.5,3,4.5,4,4,5,4.5,4,4,5,5,5,4,4,4.5,4.5,4.5,4,5,5,5,4,4.5,5,5,4.5,4.5,4.5,4.5,3.5,3.5,4,4,5,4.5,5,4.5,4.5,4,4,4,4,5,5,3,3,4.5,4,3.5,3.5,4,4,4.5,4.5,4.5,4,4,4.5,4,5,4,4,5,5,4,5,5,4.5,3.5,3,3,5,5,4.5,4.5,4.5,4,4,5,3.5,3.5,3.5,4,4,5,4.5,4,3.5,5,3.5,3.5,5,3,3,5,5,5,4,5,5,3,3,4.5,4,4,4,4,4.5,4.5,4,3.5,3.5,4,5,3.5,4.5,4.5,4.5,4.5,5,5,4,4,4,4,4,4.5,4.5,4.5,3.5,3.5,3.5,4.5,4.5,4.5,4.5,4.5,5,5,4,3,5,4.5,4.5,5,5,5,4.5,4.5,4,4,4.5,4.5,4,3,3,4.5,4.5,4.5,4,3,4,5,4.5,4.5,4.5,3.5,3,3,3,3,3,3.5,3.5,4,4,4,3.5,3.5,3.5,3.5,4,4,4,4.5,2,2,2,4,4,3,3,3,3,1.5,2.5,2.5,4,4,3,3,2.5,4,4,5,5,5,5,4.5,4.5,4.5,3,3,3,5,4.5,3.5,3.5,4,4.5,4.5,3.5,3.5,3.5,3,3,4.5,4.5,3.5,3,3,3,3,3.5,3,3,3,3,4,2,2,2,4,4,2.5,2.5,2.5,2.5,2.5,2.5,3.5,3.5,3.5,3.5,3.5,1.5,3,3,4.5,4.5,3.5,3.5,4.5,4.5,4,4,3,4,4.5,4.5,4,4,4,4.5,4.5,2,3,4,4,4.5,4.5,5,3.5,5,3.5,3.5,3.5,4.5,3,3,4.5,4.5,4,4,2.5,2.5,2.5,3,3,3,3,2.5,2,2.5,4.5,4.5,4.5,4,4,4.5,3.5,3,3,3,3,3.5,4,3.5,3,3,4,3,3,3,3,5,5,5,5,2.5,2.5,3,3,4,3.5,3.5],["Public","AAPI Serving","Public","Public","Community","Hispanic Serving","Public","Public","Liberal Arts","Private","Liberal Arts","Religious","Public","Private","Liberal Arts","Public","Public","Hispanic Serving","Public","Hispanic Serving","Private","Hispanic Serving","Public","Private","Liberal Arts","Public","Private","Liberal Arts","Private","Liberal Arts","Religious","Private","Liberal Arts","Public","Hispanic Serving","Private","Public","Public","Hispanic Serving","Private","Liberal Arts","Public","Liberal Arts","Public","Hispanic Serving","Private","Liberal Arts","Private","Public","Public","Public","Public","Hbcu","Public","Private","Private","Liberal Arts","Public","Private","Liberal Arts","Public","Private","Public","Hispanic Serving","AAPI Serving","Public","Public","Liberal Arts","Hispanic Serving","Private","Public","Private","Public","Public","Hispanic Serving","Public","Liberal Arts","Public","Liberal Arts","Public","Military","Private","Public","Public","Private","Technical","Public","Liberal Arts","Private","Liberal Arts","Private","Liberal Arts","Public","Liberal Arts","Public","Public","Public","Liberal Arts","Community","Public","Public","Private","Liberal Arts","Private","Liberal Arts","Public","Public","Public","Private","Liberal Arts","Private","Liberal Arts","Public","Public","Hispanic Serving","Public","Public","Private","Liberal Arts","Public","Liberal Arts","Private","Liberal Arts","Religious","Public","Hispanic Serving","Private","Hispanic Serving","AAPI Serving","Liberal Arts","Public","Private","Public","Public","Public","Public","Public","Public","Liberal Arts","Public","Private","Liberal Arts","Private","Liberal Arts","Religious","Public","Public","Liberal Arts","Public","Liberal Arts","Public","Private","Private","Liberal Arts","Technical","Public","Liberal Arts","Public","Public","AAPI Serving","Liberal Arts","Public","Community","Private","Liberal Arts","Private","Liberal Arts","Public","Public","Private","Liberal Arts","Private","Private","Liberal Arts","Public","Public","Liberal Arts","Private","Liberal Arts","Private","Private","Religious","Private","Liberal Arts","Religious","Public","Public","Public","Community","Private","Private","Liberal Arts","Public","Hispanic Serving","AAPI Serving","Public","Hispanic Serving","Private","Liberal Arts","Private","Liberal Arts","Public","Private","Religious","Public","Private","Religious","Public","Private","Private","Public","Hispanic Serving","Private","Liberal Arts","Public","Private","Liberal Arts","Religious","Public","Hispanic Serving","Private","Liberal Arts","Public","Liberal Arts","Other Minority Serving","Private","Liberal Arts","Religious","Hispanic Serving","Private","Liberal Arts","Religious","Public","Public","Community","Private","Private","Liberal Arts","Private","Private","Liberal Arts","Religious","Community","Private","Community","Public","Liberal Arts","Private","Religious","Private","Private","Liberal Arts","Private","Liberal Arts","Religious","Other Minority Serving","Public","Liberal Arts","Military","Private","Liberal Arts","Religious","Public","Public","Private","Religious","Public","Public","Hispanic Serving","Private","Liberal Arts","Other Minority Serving","Private","Liberal Arts","Public","Liberal Arts","Public","Private","Liberal Arts","Private","Liberal Arts","Hispanic Serving","Public","Community","Hispanic Serving","AAPI Serving","Community","Private","Liberal Arts","Religious","Private","Liberal Arts","Public","Liberal Arts","Hispanic Serving","Other Minority Serving","Community","Technical","Community","Public","Hispanic Serving","AAPI Serving","Other Minority Serving","Community","Private","Liberal Arts","Community","Public","Community","Hispanic Serving","Private","Liberal Arts","Public","Liberal Arts","Community","Private","Private","Liberal Arts","Public","Liberal Arts","Hispanic Serving","Private","Liberal Arts","Public","Liberal Arts","Private","AAPI Serving","Private","Liberal Arts","Public","Public","Public","Public","Hispanic Serving","Private","Public","Public","Liberal Arts","Private","Technical","Private","Religious","Community","Liberal Arts","Technical","Private","Religious","Private","Liberal Arts","Liberal Arts","Public","Community","Public","Public","Liberal Arts","Public","Liberal Arts","Public","Private","Community","Community","Community","Community","Public","Public","Liberal Arts","Public","Technical","Community","Private","Liberal Arts","Technical","Hispanic Serving","Public","Military","Hispanic Serving","AAPI Serving","Public","Liberal Arts","Private","Liberal Arts","Community","Private","Liberal Arts"],[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>rating<\/th>\n      <th>type<\/th>\n      <th>value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":1},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"rating","targets":1},{"name":"type","targets":2},{"name":"value","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>That looks just like we wanted it to. Now that our data is formatting, we can work on the plot. Per the data dictionary on the TidyVerse GitHub repository, we know that fractional scores are possible. A quick call to the <code>unique</code> function told me that the “fractional” scores are only half-stars, not any decimal in between two scores. So 1 and 1.5 are possible scores, but 1.7 is not. We should bin these scores by their leading digit so we have five possible fill values instead of ten. We’ll call these bins <code>rating_levs</code>, or “rating levels.”</p>
<p>I would also like to order the bars in descending order of the total number of universities of that type. To do that, we’ll count how many of each category there are and save the order as a vector <code>uni_levs</code>, or “university levels.”</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">uni_levs <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> uni_types <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(type) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">count =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>()) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(count)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(type)</span>
<span id="cb4-6"></span>
<span id="cb4-7">rating_levs <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1 - 1.5"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2 - 2.5"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"3 - 3.5"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"4 - 4.5"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"5"</span>)</span></code></pre></div>
</details>
</div>
<p>For our last data wrangling step, we can assign the rating bins to their respective ratings. I’ll create a new column for this and call it <code>score</code>. After that, we can group by type of university and <code>score</code>, and count the number of occurrences of each group. Then, we’ll be ready to plot.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">uni_types <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> uni_types <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-2">  </span>
<span id="cb5-3">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># assign bins to the score variable</span></span>
<span id="cb5-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb5-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">score =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb5-6">      rating <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> rating_levs[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>],</span>
<span id="cb5-7">      rating <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> rating_levs[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>],</span>
<span id="cb5-8">      rating <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> rating_levs[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>],</span>
<span id="cb5-9">      rating <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> rating_levs[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>],</span>
<span id="cb5-10">      <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> rating_levs[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>] </span>
<span id="cb5-11">    ),</span>
<span id="cb5-12">    </span>
<span id="cb5-13">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># order the score bins using the rating_levs we made earlier</span></span>
<span id="cb5-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">score =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(score, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> rating_levs)</span>
<span id="cb5-15">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-16">  </span>
<span id="cb5-17">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># count the number of each type/score combination</span></span>
<span id="cb5-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(type, score) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">count =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>(), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-20">  </span>
<span id="cb5-21">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># reorder the universities by descending order of number</span></span>
<span id="cb5-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(type, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rev</span>(uni_levs)))</span></code></pre></div>
</details>
</div>
</section>
<section id="the-plot" class="level1">
<h1>The Plot</h1>
<p>Now that we have our data, let’s get the skeleton of the plot going. I’m going to use a favorite “cheat code” of mine for making aesthetically pleasing bar graphs in R: the <code>ggchicklet</code> package. It lets us round the corners of each bar, which gives a much more aesthetic appearance (in my opinion). So, instead of using the <code>geom_col</code> function that is standard, we will use <code>geom_chicklet</code> instead.</p>
<p>One small note for <code>geom_chicklet</code>: it prefers to have bar graphs be vertical. But because my category names are long (and you <em>never</em> want to rotate text), I would like the plot to be horizontal. So I’ll map the type to the <code>x</code> axis and the counts to the <code>y</code> axis like <code>geom_chicklet</code> prefers, but I’ll use <code>coord_flip</code> afterwards to make it horizontal. This is the same technique that the author of the <code>ggchicklet</code> package uses in his demo on the <a href="https://github.com/hrbrmstr/ggchicklet"><code>ggchicklet</code> GitHub repository</a>.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">uni_types <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> type, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> count, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> score)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_chicklet</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">position =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">position_stack</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reverse =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_06112024_files/figure-html/plot-1-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>This is already a great start! We have some aesthetic changes to make, but our bins and bars are in the order that we were hoping. Let’s change some colors.</p>
<p>First, I’ll use my favorite theme function, which comes from the <code>ggthemes</code> package. That theme is <code>theme_fivethirtyeight</code>, which takes its name from the legendary data visualizations of the <a href="https://abcnews.go.com/538">FiveThirtyEight</a> website.</p>
<p>I also think it would be appropriate for us to use Pride colors, don’t you? Of course, there is an R package for that: the <code>gglgbtq</code> package, which I imported earlier. We will use the “rainbow” color palette provided by <code>gglgbtq</code> to color our bars.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">uni_types <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> type, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> count, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> score)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_chicklet</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">position =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">position_stack</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reverse =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-5">  </span>
<span id="cb7-6">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># change theme and base font size</span></span>
<span id="cb7-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_fivethirtyeight</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-8">  </span>
<span id="cb7-9">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># change bar colors and put the legend in the right order</span></span>
<span id="cb7-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">palette_lgbtq</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rainbow"</span>))</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_06112024_files/figure-html/plot-2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>Now we’re cooking! I think we are safe to add the title and subtitle, and then we can make a few more aesthetic changes before wrapping up. I want the background to be black (personal preference), which means the text needs to be white. I also don’t think that horizontal grid lines are necessary when the <code>y</code> axis is discrete, so we will remove those. I love the legend, but I would like it to be stacked and placed vertically in the plot, rather than horizontal and below the plot.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">uni_types <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb8-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> type, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> count, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> score)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_chicklet</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">position =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">position_stack</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reverse =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_fivethirtyeight</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">palette_lgbtq</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rainbow"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-7">  </span>
<span id="cb8-8">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add title and subtitle</span></span>
<span id="cb8-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb8-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Campus Pride Index Scores"</span>,</span>
<span id="cb8-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Higher scores mean increased LGBTQ-inclusive policies/programs"</span>,</span>
<span id="cb8-12">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-13">  </span>
<span id="cb8-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb8-15">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># make all text white</span></span>
<span id="cb8-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Lato"</span>) ,</span>
<span id="cb8-17">    </span>
<span id="cb8-18">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># adjust title font size</span></span>
<span id="cb8-19">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(),</span>
<span id="cb8-20">    </span>
<span id="cb8-21">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># make background black</span></span>
<span id="cb8-22">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>),</span>
<span id="cb8-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>),</span>
<span id="cb8-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>),</span>
<span id="cb8-25">    </span>
<span id="cb8-26">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># remove grid lines</span></span>
<span id="cb8-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid.major.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb8-28">    </span>
<span id="cb8-29">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># move legend</span></span>
<span id="cb8-30">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.direction =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"vertical"</span>,</span>
<span id="cb8-31">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>),</span>
<span id="cb8-32">  )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_06112024_files/figure-html/plot-3-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>Much better! Only a few small edits left. First, I don’t think the legend needs a title. I also want the higher scores to be higher on the legend, so we can reverse the order of the legend inside of the <code>scale_fill_manual</code> function. The <code>y</code> axis text is a little far from the axis for my liking, so we will shift that in, and we’ll be done, save for one more thing: fonts.</p>
<p>I’m going to use custom fonts that aren’t shipped with R or <code>ggplot</code>. These fonts come from <a href="https://fonts.google.com">Google Fonts</a>, and we will need to use two packages to get them to work: <code>sysfonts</code> to load fonts from Google and <code>showtext</code> to get them to work with our plots. Once we import them, we can use them like any other font in our <code>ggplot</code> graphs!</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Click here for code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># load fonts from Google Fonts into our project</span></span>
<span id="cb9-2">sysfonts<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">font_add_google</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Galada"</span>)</span>
<span id="cb9-3">sysfonts<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">font_add_google</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Lato"</span>)</span>
<span id="cb9-4">showtext<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">showtext_auto</span>()</span>
<span id="cb9-5"></span>
<span id="cb9-6">uni_types <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb9-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> type, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> count, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> score)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_chicklet</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">position =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">position_stack</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reverse =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_fivethirtyeight</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_manual</span>(</span>
<span id="cb9-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">palette_lgbtq</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rainbow"</span>),</span>
<span id="cb9-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">guide =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guide_legend</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reverse =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># reverse the legend order</span></span>
<span id="cb9-14">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb9-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Campus Pride Index Scores"</span>,</span>
<span id="cb9-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Higher scores mean increased LGBTQ-inclusive policies/programs"</span>,</span>
<span id="cb9-18">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb9-20">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># use Lato font from Google for all text</span></span>
<span id="cb9-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Lato"</span>) ,</span>
<span id="cb9-22">    </span>
<span id="cb9-23">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># use Galada font from Google just for the title</span></span>
<span id="cb9-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Galada"</span>),</span>
<span id="cb9-25">    </span>
<span id="cb9-26">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>),</span>
<span id="cb9-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>),</span>
<span id="cb9-28">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid.major.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb9-29">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>),</span>
<span id="cb9-30">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb9-31">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.direction =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"vertical"</span>,</span>
<span id="cb9-32">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>),</span>
<span id="cb9-33">    </span>
<span id="cb9-34">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># shift y axis text closer to the margin</span></span>
<span id="cb9-35">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">margin =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">margin</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">r =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>))</span>
<span id="cb9-36">  )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://mitchellharrison.github.io/tutorials/tidytuesday_06112024_files/figure-html/plot-final-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>Done! With some data wrangling and some nice themes, we have arrived of a graph that we can be <em>proud</em> of (get it?). I hope this helps you in your own data viz journey, but if you have further questions, feel free to join my <a href="https://discord.gg/vF6W2bdKFH">Discord server</a> and ask me personally! And if you are feeling grateful for my work (and are financially able to), you can give me a special thanks by <a href="https://buymeacoffee.com/mitchellharrison">buying me a coffee</a>.</p>
<p>As always, thanks for reading, and see you next week!</p>


</section>

 ]]></description>
  <category>Data Viz</category>
  <guid>https://mitchellharrison.github.io/tutorials/tidytuesday_06112024.html</guid>
  <pubDate>Tue, 25 Mar 2025 18:57:49 GMT</pubDate>
  <media:content url="https://mitchellharrison.github.io/images/thumbnails/projects/tidytuesday/06112024.jpg" medium="image" type="image/jpeg"/>
</item>
</channel>
</rss>
