{
  "hash": "fbbbabe5c10bd99271f7cda0ee5a8fff",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Campus Pride Index | TidyTuesday\"\nauthor: \"Mitch Harrison\"\ncategories:\n  - \"Data Viz\"\n  - \"TidyTuesday\"\ndate: \"June 11, 2024\"\nimage: \"../../images/thumbnails/projects/tidytuesday/06112024.jpg\"\n---\n\n\n\n\n# Welcome!\n\nHappy pride month! On this fine TidyTuesday afternoon, we will see how different \ntypes of colleges and universities handle LGBTQ+ inclusion! The Campus Pride \nIndex tracks safety, inclusivity, and LGBTQ+ policies/programs at universities \nacross the United States. Results are on a 1-5 scale (with higher numbers being \nmost inclusive), and colleges are grouped by various discrete categories. Today, \nwe'll build a stacked horizontal bar chart to see the distribution of scores for \nsome of those categories. I'll use the `ggchicklet` package and some custom \nfonts for easy aesthetic changes, and we'll be done! If you want to see a \nstep-by-step tutorial explaining the code, click \n[here](../../tutorials/tidytuesday_06112024.qmd).\n\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(gglgbtq)\nlibrary(ggchicklet)\nlibrary(ggthemes)\n\n# load custom fonts for the plot -----------------------------------------------\n\nsysfonts::font_add_google(name = \"Galada\")\nsysfonts::font_add_google(name = \"Lato\")\nshowtext::showtext_auto()\n\n# load the data ----------------------------------------------------------------\n\npride_schools <- read_csv(paste0(\n  \"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/\",\n  \"2024/2024-06-11/pride_index.csv\"\n))\n\npride_tags <- read_csv(paste0(\n  \"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/\",\n  \"2024/2024-06-11/pride_index_tags.csv\"\n))\n\n# format data for plotting -----------------------------------------------------\n\nuni_types <- pride_schools |>\n  left_join(pride_tags) |>\n  select(rating, public, private, community, liberal_arts, technical,\n         religious, military, hbcu, hispanic_serving, aapi_serving,\n         other_minority_serving) |> \n  mutate(across(everything(), ~ replace_na(., FALSE))) |>\n  pivot_longer(cols = !rating, names_to = \"type\") |>\n  filter(value == TRUE) |>\n  mutate(\n    type = str_replace_all(type, \"_\", \" \"),\n    type = str_to_title(type),\n    type = str_replace(type, \"Aapi\", \"AAPI\")\n  )\n\n# factor levels for ordering bars/fills ----------------------------------------\n\nuni_levs <- uni_types |>\n  group_by(type) |>\n  summarise(count = n()) |>\n  arrange(desc(count)) |>\n  pull(type)\n\nrating_levs <- c(\"1 - 1.5\", \"2 - 2.5\", \"3 - 3.5\", \"4 - 4.5\", \"5\")\n\n# build the plot! --------------------------------------------------------------\n\nuni_types |>\n  mutate(\n    score = case_when(\n      rating < 2 ~ rating_levs[1],\n      rating < 3 ~ rating_levs[2],\n      rating < 4 ~ rating_levs[3],\n      rating < 5 ~ rating_levs[4],\n      TRUE ~ rating_levs[5] \n    ),\n    score = factor(score, levels = rating_levs)\n  ) |>\n  group_by(type, score) |>\n  summarise(count = n(), .groups = \"drop\") |>\n  mutate(type = factor(type, levels = rev(uni_levs))) |>\n  ggplot(aes(x = type, y = count, fill = score)) +\n  geom_chicklet(position = position_stack(reverse = TRUE), width = 0.6) +\n  coord_flip() +\n  theme_fivethirtyeight() +\n  scale_fill_manual(\n    values = palette_lgbtq(\"rainbow\"),\n    guide = guide_legend(reverse = TRUE)\n  ) +\n  labs(\n    title = \"Campus Pride Index Scores\",\n    subtitle = \"Higher scores mean increased LGBTQ-inclusive policies/programs\",\n  ) +\n  theme(\n    text = element_text(color = \"white\", family = \"Lato\") ,\n    plot.title = element_text(family = \"Galada\"),\n    plot.background = element_rect(fill = \"black\"),\n    panel.background = element_rect(fill = \"black\"),\n    panel.grid.major.y = element_blank(),\n    legend.background = element_rect(fill = \"black\"),\n    legend.title = element_blank(),\n    legend.direction = \"vertical\",\n    legend.position = c(0.9, 0.5),\n    axis.text.y = element_text(margin = margin(r = -20))\n  )\n```\n\n::: {.cell-output-display}\n![](pride_files/figure-html/plot-pride-1.png){fig-align='center' width=960}\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n\n\n# Conclusion\n\nThere we have it! Seeing very few 1s is a good sign, but there is always room \nfor progress. The top three types of colleges by number (public, private, and \nliberal arts) are highly inclusive, while community colleges (where I started my \neducational journey) have a long way to go.\n\nIf you have any questions or suggestions for improvements, the best way to reach \nme is on [Discord](https://discord.gg/vF6W2bdKFH)! And, of course, if you want \nto support this work financially, you can \n[buy me a coffee](https://buymeacoffee.com/mitchellharrison)!\n\nThanks for reading, and I'll see you next week!",
    "supporting": [
      "pride_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}